(window.AMP=window.AMP||[]).push(function(e){!function t(e,r,n){function o(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[s]={exports:{}};e[s][0].call(c.exports,function(t){var r=e[s][1][t];return o(r?r:t)},c,c.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,r,n){Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../src/layout"),i=t("../../../src/url"),s=t("../../../src/event-helper"),a=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"isLayoutSupported",value:function(e){return e==o.Layout.FIXED||e==o.Layout.FIXED_HEIGHT}},{key:"layoutCallback",value:function(){var e=document.createElement("audio");return e.play?(e.controls=!0,this.element.getAttribute("src")&&(0,i.assertHttpsUrl)(this.element.getAttribute("src"),this.element),this.propagateAttributes(["src","autoplay","muted","loop"],e),this.applyFillContent(e),this.getRealChildNodes().forEach(function(t){t.getAttribute&&t.getAttribute("src")&&(0,i.assertHttpsUrl)(t.getAttribute("src"),t),e.appendChild(t)}),this.element.appendChild(e),this.audio_=e,(0,s.loadPromise)(e)):(this.toggleFallback(!0),Promise.resolve())}},{key:"documentInactiveCallback",value:function(){return this.audio_&&this.audio_.pause(),!1}}]),t}(e.BaseElement);n.AmpAudio=a,e.registerElement("amp-audio",a)},{"../../../src/event-helper":3,"../../../src/layout":4,"../../../src/url":6}],2:[function(e,t,r){function n(e,t,r){var n=void 0;if(!e){t=t||"Assertion failed";var s=t.split("%s"),a=s.shift(),u=a,l=[];i(l,a);for(var c=2;c<arguments.length;c++){var d=arguments[c];d&&d.tagName&&(n=d);var f=s.shift();l.push(d),i(l,f.trim()),u+=o(d)+f}var h=new Error(u);throw h.fromAssert=!0,h.associatedElement=n,h.messageArray=l,h}return e}function o(e){return e instanceof Element?e.tagName.toLowerCase()+(e.id?"#"+e.id:""):e}function i(e,t){""!=t&&e.push(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.assert=n},{}],3:[function(e,t,r){function n(e,t,r,n){var o=n||!1,i=void 0,s=function(e){r(e),i()};return i=function(){e.removeEventListener(t,s,o)},e.addEventListener(t,s,o),i}function o(e,t,r,o){var i=void 0,s=new Promise(function(o,s){i=n(e,t,o,r)});return a(s,i,o)}function i(e){return e.complete||"complete"==e.readyState}function s(e,t){var r=void 0,o=void 0,s=new Promise(function(t,s){i(e)?t(e):(r="AUDIO"===e.tagName||"VIDEO"===e.tagName?n(e,"loadstart",function(){return t(e)}):n(e,"load",function(){return t(e)}),o=n(e,"error",s))});return a(s,function(){r&&r(),o&&o()},t)}function a(e,t,r){var n=void 0;return n=void 0===r?e:u.timer.timeoutPromise(r||0,e),t?n.then(function(e){return t(),e},function(e){throw t(),e}):n}Object.defineProperty(r,"__esModule",{value:!0}),r.listenOnce=n,r.listenOncePromise=o,r.isLoaded=i,r.loadPromise=s;var u=e("./timer")},{"./timer":5}],4:[function(e,t,r){function n(e){for(var t in v)if(v[t]==e)return v[t];return void 0}function o(e){return"-amp-layout-"+e}function i(e){return e==v.FIXED||e==v.FIXED_HEIGHT||e==v.RESPONSIVE||e==v.FILL}function s(e){var t="string"==typeof e?e:e.tagName;return t&&0==t.toLowerCase().indexOf("i-")}function a(e){return"number"==typeof e?e+"px":e&&/^\d+(\.\d+)?(px|em|rem|vh|vw|vmin|vmax)?$/.test(e)?/^\d+(\.\d+)?$/.test(e)?e+"px":e:void 0}function u(e){return(0,m.assert)(/^\d+(\.\d+)?(px|em|rem|vh|vw|vmin|vmax)$/.test(e),"Invalid length value: %s",e),e}function l(e){u(e);var t=(0,m.assert)(e.match(/[a-z]+/i),"Failed to read units from %s",e);return t[0]}function c(e){return parseFloat(e)}function d(e){return e=e.toUpperCase(),void 0!==p[e]}function f(e){if(e=e.toUpperCase(),!p[e]){var t=e.replace(/^AMP\-/,""),r=document.createElement(t);r.controls=!0,r.style.position="absolute",r.style.visibility="hidden",document.body.appendChild(r),p[e]={width:r.offsetWidth||1,height:r.offsetHeight||1},document.body.removeChild(r)}return p[e]}function h(e){return g[e.toUpperCase()]||!1}Object.defineProperty(r,"__esModule",{value:!0}),r.parseLayout=n,r.getLayoutClass=o,r.isLayoutSizeDefined=i,r.isInternalElement=s,r.parseLength=a,r.assertLength=u,r.getLengthUnits=l,r.getLengthNumeral=c,r.hasNaturalDimensions=d,r.getNaturalDimensions=f,r.isLoadingAllowed=h;var m=e("./asserts"),v={NODISPLAY:"nodisplay",FIXED:"fixed",FIXED_HEIGHT:"fixed-height",RESPONSIVE:"responsive",CONTAINER:"container",FILL:"fill"};r.Layout=v;var p={"AMP-PIXEL":{width:1,height:1},"AMP-AUDIO":null};r.naturalDimensions_=p;var g={"AMP-ANIM":!0,"AMP-IFRAME":!0,"AMP-IMG":!0,"AMP-INSTAGRAM":!0,"AMP-PINTEREST":!0,"AMP-VIDEO":!0};r.LOADING_ELEMENTS_=g},{"./asserts":2}],5:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(t){babelHelpers.classCallCheck(this,e),this.win=t,this.resolved_=Promise.resolve(),this.taskCount_=0,this.canceled_={},this.startTime_=this.now()}return babelHelpers.createClass(e,[{key:"now",value:function(){return Number(new Date)}},{key:"timeSinceStart",value:function(){return this.now()-this.startTime_}},{key:"delay",value:function(e,t){var r=this;if(!t){var n=function(){var t="p"+r.taskCount_++;return r.resolved_.then(function(){return r.canceled_[t]?void delete r.canceled_[t]:void e()}),{v:t}}();if("object"==typeof n)return n.v}return this.win.setTimeout(e,t)}},{key:"cancel",value:function(e){return"string"==typeof e?void(this.canceled_[e]=!0):void this.win.clearTimeout(e)}},{key:"promise",value:function(e,t){var r=this,n=null;return new Promise(function(o,i){n=r.delay(function(){n=-1,o(t)},e),-1==n&&i(new Error("Failed to schedule timer."))})["catch"](function(e){return-1!=n&&r.cancel(n),Promise.reject(e)})}},{key:"timeoutPromise",value:function(e,t){var r=this,n=null,o=new Promise(function(t,o){n=r.delay(function(){n=-1,o("timeout")},e),-1==n&&o(new Error("Failed to schedule timer."))})["catch"](function(e){return-1!=n&&r.cancel(n),Promise.reject(e)});return t?new Promise(function(e,r){o.then(e,r),t.then(e,r)}):o}}]),e}();r.Timer=n;var o=new n(window);r.timer=o},{}],6:[function(e,t,r){function n(e){var t=document.createElement("a");t.href=e;var r={href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:"0"==t.port?"":t.port,pathname:t.pathname,search:t.search,hash:t.hash};return r.origin=t.origin&&"null"!=t.origin?t.origin:s(r),(0,u.assert)(r.origin,"Origin must exist"),r}function o(e,t){var r=n(e);return(0,u.assert)("https:"==r.protocol||/^(\/\/)/.test(e)||"localhost"==r.hostname||r.hostname.lastIndexOf(".localhost")==r.hostname.length-".localhost".length,'%s source must start with "https://" or "//" or be relative and served from https. Invalid value: %s',t,e),e}function i(e){var t=Object.create(null);if(!e)return t;(0==e.indexOf("?")||0==e.indexOf("#"))&&(e=e.substr(1));for(var r=e.split("&"),n=0;n<r.length;n++){var o=r[n],i=o.indexOf("="),s=void 0,a=void 0;-1!=i?(s=decodeURIComponent(o.substring(0,i)).trim(),a=decodeURIComponent(o.substring(i+1)).trim()):(s=decodeURIComponent(o).trim(),a=""),s&&(t[s]=a)}return t}function s(e){return"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href}function a(e){var t=e.indexOf("#");return-1==t?e:e.substring(0,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.parseUrl=n,r.assertHttpsUrl=o,r.parseQueryString=i,r.getOrigin=s,r.removeFragment=a;var u=e("./asserts")},{"./asserts":2}]},{},[1])});
//# sourceMappingURL=amp-audio-0.1.js.map