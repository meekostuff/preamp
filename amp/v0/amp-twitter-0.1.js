(window.AMP=window.AMP||[]).push(function(e){!function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};e[a][0].call(l.exports,function(t){var r=e[a][1][t];return i(r?r:t)},l,l.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,r,n){var i=t("../../../src/3p-frame"),o=t("../../../src/layout"),a=t("../../../src/event-helper"),s=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createdCallback",value:function(){this.preconnect.url("https://syndication.twitter.com"),this.preconnect.prefetch("https://platform.twitter.com/widgets.js"),(0,i.prefetchBootstrap)(this.getWin())}},{key:"isLayoutSupported",value:function(e){return(0,o.isLayoutSizeDefined)(e)}},{key:"layoutCallback",value:function(){var e=this,t=(0,i.getIframe)(this.element.ownerDocument.defaultView,this.element,"twitter");return this.applyFillContent(t),this.element.appendChild(t),(0,i.listen)(t,"embed-size",function(r){t.height=r.height,t.width=r.width;var n=t.parentElement;n.setAttribute("height",r.height),n.setAttribute("width",r.width),e.changeHeight(r.height)}),(0,a.loadPromise)(t)}}]),t}(e.BaseElement);e.registerElement("amp-twitter",s)},{"../../../src/3p-frame":3,"../../../src/event-helper":6,"../../../src/layout":7}],2:[function(e,t,r){function n(){l=!1,s.length?c=s.concat(c):f=-1,c.length&&i()}function i(){if(!l){var e=setTimeout(n);l=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function a(){}var s,u=t.exports={},c=[],l=!1,f=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new o(e,t)),1!==c.length||l||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=a,u.addListener=a,u.once=a,u.off=a,u.removeListener=a,u.removeAllListeners=a,u.emit=a,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],3:[function(e,t,r){function n(e,t,r){var n=t.getAttribute("width"),i=t.getAttribute("height"),o=r||t.getAttribute("type");(0,d.assert)(o,"Attribute type required for <amp-ad>: %s",t);var a={};u(t,a),a.width=(0,p.getLengthNumeral)(n),a.height=(0,p.getLengthNumeral)(i);var s=t.getLayoutBox();a.initialWindowWidth=s.width,a.initialWindowHeight=s.height,a.type=o,a._context={referrer:e.document.referrer,canonicalUrl:(0,v.documentInfoFor)(e).canonicalUrl,location:{href:e.location.href},mode:(0,g.getMode)()};var c=t.getAttribute("src");return c&&(a.src=c),a}function i(e,t,r){var i=n(e,t,r),o=document.createElement("iframe");_[i.type]||(_[i.type]=0),o.name="frame_"+i.type+"_"+_[i.type]++;var a=l(e)+"#"+JSON.stringify(i);return o.src=a,o.ampLocation=(0,w.parseUrl)(a),o.width=i.width,o.height=i.height,o.style.border="none",o.setAttribute("scrolling","no"),o.onload=function(){this.readyState="complete"},o}function o(e,t,r){var n=e.ownerDocument.defaultView,i=e.ampLocation.origin,o=function(n){n.origin==i&&n.source==e.contentWindow&&n.data&&"amp-3p"==n.data.sentinel&&n.data.type==t&&r(n.data)};return n.addEventListener("message",o),function(){n.removeEventListener("message",o)}}function a(e,t,r){var n=o(e,t,function(e){return n(),r(e)});return n}function s(e,t,r){r.type=t,r.sentinel="amp-3p",e.contentWindow.postMessage(r,e.ampLocation.origin)}function u(e,t){for(var r=0;r<e.attributes.length;r++){var n=e.attributes[r];0==n.name.indexOf("data-")&&(t[(0,b.dashToCamelCase)(n.name.substr(5))]=n.value)}var i=e.getAttribute("json");if(i){var o=void 0;try{o=JSON.parse(i)}catch(a){(0,d.assert)(!1,"Error parsing JSON in json attribute in element %s",e)}for(var s in o)t[s]=o[s]}}function c(e){var t=l(e),r=(0,y.preconnectFor)(e);r.prefetch(t),r.prefetch("https://3p.ampproject.net/1447372082206/f.js")}function l(e){return(0,m.getService)(window,"bootstrapBaseUrl",function(){return h(e)||f(e)})}function f(e){var t="https://3p.ampproject.net/1447372082206/frame.html";return(0,g.getMode)().localDev&&(t="http://ads.localhost:"+e.location.port+"/dist.3p/current"+((0,g.getMode)().minified?"-min/frame":"/frame.max")+".html"),t}function h(e){var t=e.document.querySelector('meta[name="amp-3p-iframe-src"]');if(!t)return null;var r=(0,w.assertHttpsUrl)(t.getAttribute("content"),t);return(0,d.assert)(-1==r.indexOf("?"),"3p iframe url must not include query string %s in element %s.",r,t),(0,d.assert)((0,w.parseUrl)(r).origin!=(0,w.parseUrl)(e.location.href).origin,"3p iframe url must not be on the same origin as the current document %s in element %s.",r,t),r+"?1447372082206"}Object.defineProperty(r,"__esModule",{value:!0}),r.getIframe=i,r.listen=o,r.listenOnce=a,r.postMessage=s,r.addDataAndJsonAttributes_=u,r.prefetchBootstrap=c,r.getBootstrapBaseUrl=l;var d=e("./asserts"),p=e("../src/layout"),m=e("./service"),v=e("./document-info"),g=e("./mode"),y=e("./preconnect"),b=e("./string"),w=e("./url"),_={}},{"../src/layout":7,"./asserts":4,"./document-info":5,"./mode":8,"./preconnect":10,"./service":11,"./string":12,"./url":14}],4:[function(e,t,r){function n(e,t,r){var n=void 0;if(!e){t=t||"Assertion failed";var a=t.split("%s"),s=a.shift(),u=s,c=[];o(c,s);for(var l=2;l<arguments.length;l++){var f=arguments[l];f&&f.tagName&&(n=f);var h=a.shift();c.push(f),o(c,h.trim()),u+=i(f)+h}var d=new Error(u);throw d.fromAssert=!0,d.associatedElement=n,d.messageArray=c,d}return e}function i(e){return e instanceof Element?e.tagName.toLowerCase()+(e.id?"#"+e.id:""):e}function o(e,t){""!=t&&e.push(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.assert=n},{}],5:[function(e,t,r){function n(e){return(0,i.getService)(e,"documentInfo",function(){return{canonicalUrl:(0,a.parseUrl)((0,o.assert)(e.document.querySelector("link[rel=canonical]"),"AMP files are required to have a <link rel=canonical> tag.").href).href}})}Object.defineProperty(r,"__esModule",{value:!0}),r.documentInfoFor=n;var i=e("./service"),o=e("./asserts"),a=e("./url")},{"./asserts":4,"./service":11,"./url":14}],6:[function(e,t,r){function n(e,t,r,n){var i=n||!1,o=void 0,a=function(e){r(e),o()};return o=function(){e.removeEventListener(t,a,i)},e.addEventListener(t,a,i),o}function i(e,t,r,i){var o=void 0,a=new Promise(function(i,a){o=n(e,t,i,r)});return s(a,o,i)}function o(e){return e.complete||"complete"==e.readyState}function a(e,t){var r=void 0,i=void 0,a=new Promise(function(t,a){o(e)?t(e):(r="AUDIO"===e.tagName||"VIDEO"===e.tagName?n(e,"loadstart",function(){return t(e)}):n(e,"load",function(){return t(e)}),i=n(e,"error",a))});return s(a,function(){r&&r(),i&&i()},t)}function s(e,t,r){var n=void 0;return n=void 0===r?e:u.timer.timeoutPromise(r||0,e),t?n.then(function(e){return t(),e},function(e){throw t(),e}):n}Object.defineProperty(r,"__esModule",{value:!0}),r.listenOnce=n,r.listenOncePromise=i,r.isLoaded=o,r.loadPromise=a;var u=e("./timer")},{"./timer":13}],7:[function(e,t,r){function n(e){for(var t in m)if(m[t]==e)return m[t];return void 0}function i(e){return"-amp-layout-"+e}function o(e){return e==m.FIXED||e==m.FIXED_HEIGHT||e==m.RESPONSIVE||e==m.FILL}function a(e){var t="string"==typeof e?e:e.tagName;return t&&0==t.toLowerCase().indexOf("i-")}function s(e){return"number"==typeof e?e+"px":e&&/^\d+(\.\d+)?(px|em|rem|vh|vw|vmin|vmax)?$/.test(e)?/^\d+(\.\d+)?$/.test(e)?e+"px":e:void 0}function u(e){return(0,p.assert)(/^\d+(\.\d+)?(px|em|rem|vh|vw|vmin|vmax)$/.test(e),"Invalid length value: %s",e),e}function c(e){u(e);var t=(0,p.assert)(e.match(/[a-z]+/i),"Failed to read units from %s",e);return t[0]}function l(e){return parseFloat(e)}function f(e){return e=e.toUpperCase(),void 0!==v[e]}function h(e){if(e=e.toUpperCase(),!v[e]){var t=e.replace(/^AMP\-/,""),r=document.createElement(t);r.controls=!0,r.style.position="absolute",r.style.visibility="hidden",document.body.appendChild(r),v[e]={width:r.offsetWidth||1,height:r.offsetHeight||1},document.body.removeChild(r)}return v[e]}function d(e){return g[e.toUpperCase()]||!1}Object.defineProperty(r,"__esModule",{value:!0}),r.parseLayout=n,r.getLayoutClass=i,r.isLayoutSizeDefined=o,r.isInternalElement=a,r.parseLength=s,r.assertLength=u,r.getLengthUnits=c,r.getLengthNumeral=l,r.hasNaturalDimensions=f,r.getNaturalDimensions=h,r.isLoadingAllowed=d;var p=e("./asserts"),m={NODISPLAY:"nodisplay",FIXED:"fixed",FIXED_HEIGHT:"fixed-height",RESPONSIVE:"responsive",CONTAINER:"container",FILL:"fill"};r.Layout=m;var v={"AMP-PIXEL":{width:1,height:1},"AMP-AUDIO":null};r.naturalDimensions_=v;var g={"AMP-ANIM":!0,"AMP-IFRAME":!0,"AMP-IMG":!0,"AMP-INSTAGRAM":!0,"AMP-PINTEREST":!0,"AMP-VIDEO":!0};r.LOADING_ELEMENTS_=g},{"./asserts":4}],8:[function(e,t,r){(function(t){function n(){return s?s:s=o()}function i(e){s=e}function o(){var e=("localhost"==location.hostname||location.ancestorOrigins&&location.ancestorOrigins[0]&&0==location.ancestorOrigins[0].indexOf("http://localhost:"))&&!!document.querySelector('script[src*="/dist/"],script[src*="/base/"]'),r=(0,a.parseQueryString)(location.hash).development,n=void 0!=r?"1"==r:!!document.querySelector("script[development]");return{localDev:e,development:n,minified:"production"==t.env.NODE_ENV,test:window.AMP_TEST}}Object.defineProperty(r,"__esModule",{value:!0}),r.getMode=n,r.setModeForTesting=i;var a=e("./url"),s=null}).call(this,e("_process"))},{"./url":14,_process:2}],9:[function(e,t,r){function n(e){return(0,i.getService)(e,"platform",function(){return new o(e)})}Object.defineProperty(r,"__esModule",{value:!0}),r.platformFor=n;var i=e("./service"),o=function(){function e(t){babelHelpers.classCallCheck(this,e),this.win=t}return babelHelpers.createClass(e,[{key:"isIos",value:function(){return/iPhone|iPad|iPod/i.test(this.win.navigator.userAgent)}},{key:"isSafari",value:function(){return/Safari/i.test(this.win.navigator.userAgent)&&!this.isChrome()}},{key:"isChrome",value:function(){return/Chrome|CriOS/i.test(this.win.navigator.userAgent)}}]),e}();r.Platform=o;var a=n(window);r.platform=a},{"./service":11}],10:[function(e,t,r){function n(e){return(0,i.getService)(e,"preconnect",function(){return new u(e)})}Object.defineProperty(r,"__esModule",{value:!0}),r.preconnectFor=n;var i=e("./service"),o=e("./url"),a=e("./timer"),s=e("./platform"),u=function(){function e(t){babelHelpers.classCallCheck(this,e),this.head_=t.document.head,this.origins_={},this.urls_={},this.platform_=(0,s.platformFor)(t),this.origins_[(0,o.parseUrl)(t.location.href).origin]=!0}return babelHelpers.createClass(e,[{key:"url",value:function(e){if(this.isInterestingUrl_(e)){var t=(0,o.parseUrl)(e).origin;if(!this.origins_[t]){this.origins_[t]=!0;var r=document.createElement("link");r.setAttribute("rel","dns-prefetch"),r.setAttribute("href",t);var n=document.createElement("link");n.setAttribute("rel","preconnect"),n.setAttribute("href",t),this.head_.appendChild(r),this.head_.appendChild(n),a.timer.delay(function(){r.parentNode&&r.parentNode.removeChild(r),n.parentNode&&n.parentNode.removeChild(n)},1e4),this.preconnectPolyfill_(t)}}}},{key:"prefetch",value:function t(e){if(this.isInterestingUrl_(e)&&!this.urls_[e]){this.urls_[e]=!0,this.url(e);var t=document.createElement("link");t.setAttribute("rel","prefetch"),t.setAttribute("href",e),this.head_.appendChild(t)}}},{key:"isInterestingUrl_",value:function(e){return 0==e.indexOf("https:")||0==e.indexOf("http:")?!0:!1}},{key:"preconnectPolyfill_",value:function(e){if(this.platform_.isSafari()){var t=e+"/amp_preconnect_polyfill?"+Math.random(),r=new XMLHttpRequest;r.open("HEAD",t,!0),r.send()}}}]),e}()},{"./platform":9,"./service":11,"./timer":13,"./url":14}],11:[function(e,t,r){function n(e,t,r){var n=e.services;n||(n=e.services={});var i=n[t];return i?i:n[t]=r(e)}function i(e,t){e.services&&(e.services[t]=null)}Object.defineProperty(r,"__esModule",{value:!0}),r.getService=n,r.resetServiceForTesting=i},{}],12:[function(e,t,r){function n(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}Object.defineProperty(r,"__esModule",{value:!0}),r.dashToCamelCase=n},{}],13:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(t){babelHelpers.classCallCheck(this,e),this.win=t,this.resolved_=Promise.resolve(),this.taskCount_=0,this.canceled_={},this.startTime_=this.now()}return babelHelpers.createClass(e,[{key:"now",value:function(){return Number(new Date)}},{key:"timeSinceStart",value:function(){return this.now()-this.startTime_}},{key:"delay",value:function(e,t){var r=this;if(!t){var n=function(){var t="p"+r.taskCount_++;return r.resolved_.then(function(){return r.canceled_[t]?void delete r.canceled_[t]:void e()}),{v:t}}();if("object"==typeof n)return n.v}return this.win.setTimeout(e,t)}},{key:"cancel",value:function(e){return"string"==typeof e?void(this.canceled_[e]=!0):void this.win.clearTimeout(e)}},{key:"promise",value:function(e,t){var r=this,n=null;return new Promise(function(i,o){n=r.delay(function(){n=-1,i(t)},e),-1==n&&o(new Error("Failed to schedule timer."))})["catch"](function(e){return-1!=n&&r.cancel(n),Promise.reject(e)})}},{key:"timeoutPromise",value:function(e,t){var r=this,n=null,i=new Promise(function(t,i){n=r.delay(function(){n=-1,i("timeout")},e),-1==n&&i(new Error("Failed to schedule timer."))})["catch"](function(e){return-1!=n&&r.cancel(n),Promise.reject(e)});return t?new Promise(function(e,r){i.then(e,r),t.then(e,r)}):i}}]),e}();r.Timer=n;var i=new n(window);r.timer=i},{}],14:[function(e,t,r){function n(e){var t=document.createElement("a");t.href=e;var r={href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:"0"==t.port?"":t.port,pathname:t.pathname,search:t.search,hash:t.hash};return r.origin=t.origin&&"null"!=t.origin?t.origin:a(r),(0,u.assert)(r.origin,"Origin must exist"),r}function i(e,t){var r=n(e);return(0,u.assert)("https:"==r.protocol||/^(\/\/)/.test(e)||"localhost"==r.hostname||r.hostname.lastIndexOf(".localhost")==r.hostname.length-".localhost".length,'%s source must start with "https://" or "//" or be relative and served from https. Invalid value: %s',t,e),e}function o(e){var t=Object.create(null);if(!e)return t;(0==e.indexOf("?")||0==e.indexOf("#"))&&(e=e.substr(1));for(var r=e.split("&"),n=0;n<r.length;n++){var i=r[n],o=i.indexOf("="),a=void 0,s=void 0;-1!=o?(a=decodeURIComponent(i.substring(0,o)).trim(),s=decodeURIComponent(i.substring(o+1)).trim()):(a=decodeURIComponent(i).trim(),s=""),a&&(t[a]=s)}return t}function a(e){return"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href}function s(e){var t=e.indexOf("#");return-1==t?e:e.substring(0,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.parseUrl=n,r.assertHttpsUrl=i,r.parseQueryString=o,r.getOrigin=a,r.removeFragment=s;var u=e("./asserts")},{"./asserts":4}]},{},[1])});
//# sourceMappingURL=amp-twitter-0.1.js.map