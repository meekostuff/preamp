(window.AMP=window.AMP||[]).push(function(t){!function e(t,i,s){function n(a,o){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(r)return r(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[a]={exports:{}};t[a][0].call(u.exports,function(e){var i=t[a][1][e];return n(i?i:e)},u,u.exports,e,t,i,s)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<s.length;a++)n(s[a]);return n}({1:[function(e,i,s){var n=e("./slides"),r=e("./carousel"),a=function o(t){return babelHelpers.classCallCheck(this,o),t.hasAttribute("type")&&"slides"==t.getAttribute("type")?new(babelHelpers.bind.apply(n.AmpSlides,[null].concat(babelHelpers.slice.call(arguments)))):new(babelHelpers.bind.apply(r.AmpCarousel,[null].concat(babelHelpers.slice.call(arguments))))};t.registerElement("amp-carousel",a,'.amp-carousel-button{position:absolute;box-sizing:border-box;top:50%;height:34px;width:34px;border-radius:2px;z-index:10;pointer-events:all;background-color:rgba(0,0,0,.5);background-position:50% 50%;background-repeat:no-repeat;-webkit-transform:translateY(-50%);transform:translateY(-50%);visibility:hidden}.amp-mode-mouse .amp-carousel-button,amp-carousel[controls] .amp-carousel-button{visibility:visible}amp-carousel .amp-carousel-button.amp-disabled{visibility:hidden}.amp-carousel-button-prev{left:16px;background-image:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#fff" viewBox="0 0 18 18"><path d="M15 8.25H5.87l4.19-4.19L9 3 3 9l6 6 1.06-1.06-4.19-4.19H15v-1.5z" /></svg>\');background-size:18px 18px}.amp-carousel-button-next{right:16px;background-image:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#fff" viewBox="0 0 18 18"><path d="M9 3L7.94 4.06l4.19 4.19H3v1.5h9.13l-4.19 4.19L9 15l6-6z" /></svg>\');background-size:18px 18px}\n/*# sourceURL=/extensions/amp-carousel/0.1/amp-carousel.css*/')},{"./carousel":3,"./slides":4}],2:[function(e,i,s){Object.defineProperty(s,"__esModule",{value:!0});var n=function(t){function e(){babelHelpers.classCallCheck(this,e),babelHelpers.get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(e,t),babelHelpers.createClass(e,[{key:"buildCallback",value:function(){this.prevButton_,this.nextButton_,this.buildCarousel(),this.buildButtons(),this.setupGestures(),this.setControlsState(),this.element.hasAttribute("controls")&&this.element.classList.add("-amp-carousel-has-controls")}},{key:"buildButtons",value:function(){var t=this;this.prevButton_=document.createElement("div"),this.prevButton_.classList.add("amp-carousel-button"),this.prevButton_.classList.add("amp-carousel-button-prev"),this.prevButton_.setAttribute("role","button"),this.prevButton_.setAttribute("aria-label","previous"),this.prevButton_.onclick=function(){t.prevButton_.classList.contains("amp-disabled")||t.go(-1,!0)},this.element.appendChild(this.prevButton_),this.nextButton_=document.createElement("div"),this.nextButton_.classList.add("amp-carousel-button"),this.nextButton_.classList.add("amp-carousel-button-next"),this.nextButton_.setAttribute("role","button"),this.nextButton_.setAttribute("aria-label","next"),this.nextButton_.onclick=function(){t.nextButton_.classList.contains("amp-disabled")||t.go(1,!0)},this.element.appendChild(this.nextButton_)}},{key:"prerenderAllowed",value:function(){return!0}},{key:"isRelayoutNeeded",value:function(){return!0}},{key:"buildCarousel",value:function(){}},{key:"setupGestures",value:function(){}},{key:"go",value:function(t,e){this.goCallback(t,e),this.setControlsState()}},{key:"goCallback",value:function(t,e){}},{key:"setControlsState",value:function(){this.prevButton_.classList.toggle("amp-disabled",!this.hasPrev()),this.prevButton_.setAttribute("aria-disabled",!this.hasPrev()),this.nextButton_.classList.toggle("amp-disabled",!this.hasNext()),this.nextButton_.setAttribute("aria-disabled",!this.hasNext())}},{key:"isReadyToBuild",value:function(){return this.getRealChildren().length>0}},{key:"hasPrev",value:function(){}},{key:"hasNext",value:function(){}}]),e}(t.BaseElement);s.BaseCarousel=n},{}],3:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../../src/animation"),n=t("./base-carousel"),r=t("../../../src/gesture"),a=t("../../../src/layout"),o=t("../../../src/gesture-recognizers"),l=t("../../../src/curve"),h=t("../../../src/motion"),u=t("../../../src/style"),c=babelHelpers.interopRequireWildcard(u),_=t("../../../src/transition"),v=babelHelpers.interopRequireWildcard(_),d=function(t){function e(){babelHelpers.classCallCheck(this,e),babelHelpers.get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(e,t),babelHelpers.createClass(e,[{key:"isLayoutSupported",value:function(t){return t==a.Layout.FIXED||t==a.Layout.FIXED_HEIGHT}},{key:"buildCarousel",value:function(){var t=this;this.pos_=0,this.cells_=this.getRealChildren(),this.container_=document.createElement("div"),c.setStyles(this.container_,{whiteSpace:"nowrap",position:"absolute",zIndex:1,top:0,left:0,bottom:0}),this.element.appendChild(this.container_),this.cells_.forEach(function(e){t.setAsOwner(e),e.style.display="inline-block",e!=t.cells_[0]&&(e.style.marginLeft="8px"),t.container_.appendChild(e)})}},{key:"layoutCallback",value:function(){return this.doLayout_(this.pos_),this.preloadNext_(this.pos_,1),this.setControlsState(),Promise.resolve()}},{key:"viewportCallback",value:function(t){this.updateInViewport_(this.pos_,this.pos_)}},{key:"goCallback",value:function(t,e){var i=this,n=this.nextPos_(this.pos_,t);n!=this.pos_&&!function(){var t=i.pos_;i.pos_=n,e?s.Animation.animate(v.setStyles(i.container_,{transform:v.translateX(v.numeric(-t,-n))}),200,"ease-out").thenAlways(function(){i.commitSwitch_(t,n)}):i.commitSwitch_(t,n)}()}},{key:"commitSwitch_",value:function(t,e){c.setStyles(this.container_,{transform:c.translateX(-e)}),this.doLayout_(e),this.preloadNext_(e,Math.sign(e-t)),this.updateInViewport_(e,t)}},{key:"nextPos_",value:function(t,e){var i=this.element.offsetWidth,s=this.container_.scrollWidth,n=t+e*i;return 0>n?0:s>=i&&n>s-i?s-i:n}},{key:"withinWindow_",value:function(t,e){for(var i=this.getLayoutWidth(),s=0;s<this.cells_.length;s++){var n=this.cells_[s];n.offsetLeft+n.offsetWidth>=t&&n.offsetLeft<=t+i&&e(n)}}},{key:"doLayout_",value:function(t){var e=this;this.withinWindow_(t,function(t){e.scheduleLayout(t)})}},{key:"preloadNext_",value:function(t,e){var i=this,s=this.nextPos_(t,e);s!=t&&this.withinWindow_(s,function(t){i.schedulePreload(t)})}},{key:"updateInViewport_",value:function(t,e){var i=this,s=[];this.withinWindow_(t,function(t){s.push(t),i.updateInViewport(t,!0)}),e!=t&&this.withinWindow_(e,function(t){-1==s.indexOf(t)&&i.updateInViewport(t,!1)})}},{key:"setupGestures",value:function(){var t=this;this.startPos_=0,this.minPos_=0,this.maxPos_=0,this.extent_=0,this.motion_=null;var e=r.Gestures.get(this.element);e.onGesture(o.SwipeXRecognizer,function(e){e.data.first&&t.onSwipeStart_(e.data),t.onSwipe_(e.data),e.data.last&&t.onSwipeEnd_(e.data)}),e.onPointerDown(function(){t.motion_&&(t.motion_.halt(),t.motion_=null)})}},{key:"onSwipeStart_",value:function(t){this.updateBounds_(),this.startPos_=this.pos_,this.motion_=null}},{key:"onSwipe_",value:function(t){this.pos_=this.boundPos_(this.startPos_-t.deltaX,!0),c.setStyles(this.container_,{transform:c.translateX(-this.pos_)}),Math.abs(t.velocityX)<.05&&this.commitSwitch_(this.startPos_,this.pos_)}},{key:"onSwipeEnd_",value:function(t){var e=this,i=void 0;return Math.abs(t.velocityX)>.1?(this.motion_=(0,h.continueMotion)(this.pos_,0,-t.velocityX,0,function(t,i){var s=.5*(e.boundPos_(t,!0)+e.boundPos_(t,!1));return Math.abs(s-e.pos_)<=1?!1:(e.pos_=s,c.setStyles(e.container_,{transform:c.translateX(-e.pos_)}),!0)}),i=this.motion_.thenAlways()):i=Promise.resolve(),i.then(function(){var t=e.boundPos_(e.pos_,!1);if(Math.abs(t-e.pos_)<1)return void 0;var i=v.numeric(e.pos_,t);return s.Animation.animate(function(t){e.pos_=i(t),c.setStyles(e.container_,{transform:c.translateX(-e.pos_)})},250,(0,l.bezierCurve)(.4,0,.2,1.4)).thenAlways()}).then(function(){e.commitSwitch_(e.startPos_,e.pos_),e.startPos_=e.pos_,e.motion_=null})}},{key:"updateBounds_",value:function(){var t=this.element.offsetWidth,e=this.container_.scrollWidth;this.minPos_=0,this.maxPos_=Math.max(e-t,0),this.extent_=Math.min(.4*t,200)}},{key:"boundPos_",value:function(t,e){var i=e?this.extent_:0;return Math.min(this.maxPos_+i,Math.max(this.minPos_-i,t))}},{key:"hasPrev",value:function(){return 0!=this.pos_}},{key:"hasNext",value:function(){var t=this.getLayoutWidth(),e=this.container_.scrollWidth,i=Math.max(e-t,0);return this.pos_!=i}}]),e}(n.BaseCarousel);i.AmpCarousel=d},{"../../../src/animation":6,"../../../src/curve":8,"../../../src/gesture":11,"../../../src/gesture-recognizers":10,"../../../src/layout":12,"../../../src/motion":15,"../../../src/style":20,"../../../src/transition":22,"./base-carousel":2}],4:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../../src/style"),n=babelHelpers.interopRequireWildcard(s),r=t("../../../src/transition"),a=babelHelpers.interopRequireWildcard(r),o=t("../../../src/animation"),l=t("./base-carousel"),h=t("../../../src/gesture"),u=t("../../../src/gesture-recognizers"),c=t("../../../src/curve"),_=(t("../../../src/motion"),t("../../../src/layout")),v=t("../../../src/timer"),d=function(t){function e(){babelHelpers.classCallCheck(this,e),babelHelpers.get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(e,t),babelHelpers.createClass(e,[{key:"isLayoutSupported",value:function(t){return(0,_.isLayoutSizeDefined)(t)}},{key:"buildCarousel",value:function(){var t=this;this.isLooping_=this.element.hasAttribute("loop"),this.isAutoplayRequested_=this.element.hasAttribute("autoplay"),this.autoplayDelay_=5e3,this.slides_=this.getRealChildren(),this.slides_.forEach(function(e,i){t.setAsOwner(e),e.style.display=i>0?"none":"block",t.applyFillContent(e)}),this.currentIndex_=0,this.autoplayTimeoutId_=null,this.setupAutoplay_()}},{key:"layoutCallback",value:function(){return this.scheduleLayout(this.slides_[this.currentIndex_]),this.preloadNext_(1),Promise.resolve()}},{key:"viewportCallback",value:function(t){this.updateInViewport(this.slides_[this.currentIndex_],t),this.tryAutoplay_(1,!0)}},{key:"goCallback",value:function(t,e){var i=this,s=this.nextIndex_(t);s!=this.currentIndex_&&!function(){var n=i.slides_[s],r=i.slides_[i.currentIndex_];i.currentIndex_=s,i.prepareSlide_(n,t),e?(r.style.zIndex=0,o.Animation.animate(i.createTransition_(r,n,t),200,"ease-out").thenAlways(function(){i.commitSwitch_(r,n),i.preloadNext_(t)})):i.commitSwitch_(r,n)}(),this.tryAutoplay_(1,!0)}},{key:"setupAutoplay_",value:function(){if(this.isAutoplayRequested_){var t=Number(this.element.getAttribute("autoplay"));t>0&&(this.autoplayDelay_=Math.max(1e3,t)),this.element.hasAttribute("loop")||(this.element.setAttribute("loop",""),this.isLooping_=!0)}}},{key:"tryAutoplay_",value:function(t,e){this.tryCancelAutoplayTimeout_(),this.isAutoplayRequested_&&this.isInViewport()&&(this.autoplayTimeoutId_=v.timer.delay(this.go.bind(this,t,e),this.autoplayDelay_))}},{key:"tryCancelAutoplayTimeout_",value:function(){null!==this.autoplayTimeoutId_&&(v.timer.cancel(this.autoplayTimeoutId_),this.autoplayTimeoutId_=null)}},{key:"prepareSlide_",value:function(t,e){var i=this.element.offsetWidth;n.setStyles(t,{transform:n.translateX(e*i),zIndex:1,display:"block"}),this.scheduleLayout(t)}},{key:"createTransition_",value:function(t,e,i){var s=this.element.offsetWidth;return a.all([a.setStyles(e,{transform:a.translateX(a.numeric(i*s,0)),opacity:a.numeric(.8,1)}),a.setStyles(t,{transform:a.scale(a.numeric(1,.98)),opacity:a.numeric(1,.4)})])}},{key:"commitSwitch_",value:function(t,e){n.setStyles(t,{display:"none",zIndex:0,transform:"",opacity:1}),n.setStyles(e,{display:"block",zIndex:0,transform:"",opacity:1}),this.scheduleLayout(e),this.updateInViewport(t,!1),this.updateInViewport(e,!0)}},{key:"nextIndex_",value:function(t){var e=this.currentIndex_+t;return 0>e?e=this.slides_.length+e:e>=this.slides_.length&&(e%=this.slides_.length),e}},{key:"preloadNext_",value:function(t){var e=this.nextIndex_(t);e!=this.currentIndex_&&this.schedulePreload(this.slides_[e])}},{key:"setupGestures",value:function(){var t=this;this.swipeState_=null;var e=h.Gestures.get(this.element);e.onGesture(u.SwipeXRecognizer,function(e){e.data.first&&t.onSwipeStart_(e.data),t.onSwipe_(e.data),e.data.last&&t.onSwipeEnd_(e.data)})}},{key:"onSwipeStart_",value:function(t){var i=this.slides_[this.currentIndex_],s=this.element.offsetWidth,n=0,r=0,o=a.NOOP,l=a.NOOP,h=e.getRelativeIndex(this.currentIndex_,-1,this.slides_.length),u=e.getRelativeIndex(this.currentIndex_,1,this.slides_.length);if(this.isLooping_||this.currentIndex_-1>=0){var c=this.slides_[h];this.prepareSlide_(c,-1),o=this.createTransition_(i,c,-1),n=-1}if(this.isLooping_||this.currentIndex_+1<this.slides_.length){var _=this.slides_[u];this.prepareSlide_(_,1),l=this.createTransition_(i,_,1),r=1}this.swipeState_={containerWidth:s,prevTr:o,nextTr:l,prevIndex:h,nextIndex:u,min:n,max:r,pos:0,currentIndex:this.currentIndex_}}},{key:"onSwipe_",value:function(t){var e=this.swipeState_;if(e&&e.currentIndex==this.currentIndex_){var i=Math.min(e.max,Math.max(e.min,-t.deltaX/e.containerWidth));e.nextTr(i>0?i:0),e.prevTr(0>i?-i:0),e.pos=i}}},{key:"onSwipeEnd_",value:function(t){var e=this,i=this.swipeState_;if(i&&i.currentIndex==this.currentIndex_){this.swipeState_=null;var s=i.pos;i.pos*-t.velocityX>=0&&(s=i.pos-Math.sign(t.velocityX)*(Math.abs(t.velocityX)>.2?1:0)),s=Math.min(i.max,Math.max(i.min,s));var n=Math.abs(s)>=.55?Math.sign(s):0,r=void 0;return n!=i.pos?!function(){var t=a.numeric(i.pos,n);r=o.Animation.animate(function(e){var s=t(e);i.nextTr(s>0?s:0),i.prevTr(0>s?-s:0),i.pos=s},150,(0,c.bezierCurve)(.19,.49,.2,1)).thenAlways()}():r=Promise.resolve(),r.then(function(){if(i.currentIndex==e.currentIndex_){var t=e.slides_[e.currentIndex_];n>.5?(i.nextTr(1),e.currentIndex_=i.nextIndex,e.commitSwitch_(t,e.slides_[e.currentIndex_])):-.5>n?(i.prevTr(1),e.currentIndex_=i.prevIndex,e.commitSwitch_(t,e.slides_[e.currentIndex_])):(i.nextTr(0),i.prevTr(0))}})}}},{key:"hasPrev",value:function(){return this.isLooping_?!0:0!=this.currentIndex_}},{key:"hasNext",value:function(){return this.isLooping_?!0:this.currentIndex_!=this.slides_.length-1}}],[{key:"getRelativeIndex",value:function(t,e,i){return(t+e+i)%i}}]),e}(l.BaseCarousel);i.AmpSlides=d},{"../../../src/animation":6,"../../../src/curve":8,"../../../src/gesture":11,"../../../src/gesture-recognizers":10,"../../../src/layout":12,"../../../src/motion":15,"../../../src/style":20,"../../../src/timer":21,"../../../src/transition":22,"./base-carousel":2}],5:[function(t,e,i){function s(){u=!1,o.length?h=o.concat(h):c=-1,h.length&&n()}function n(){if(!u){var t=setTimeout(s);u=!0;for(var e=h.length;e;){for(o=h,h=[];++c<e;)o&&o[c].run();c=-1,e=h.length}o=null,u=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function a(){}var o,l=e.exports={},h=[],u=!1,c=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new r(t,e)),1!==h.length||u||setTimeout(n,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=a,l.addListener=a,l.once=a,l.off=a,l.removeListener=a,l.removeAllListeners=a,l.emit=a,l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],6:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0});var s=t("./curve"),n=t("./log"),r=t("./timer"),a=t("./vsync"),o="Animation",l=function(){},h=function(){function t(e){babelHelpers.classCallCheck(this,t),this.vsync_=e||(0,a.vsyncFor)(window),this.curve_=null,this.segments_=[]}return babelHelpers.createClass(t,null,[{key:"animate",value:function(e,i,s){return(new t).setCurve(s).add(0,e,1).start(i)}}]),babelHelpers.createClass(t,[{key:"setCurve",value:function(t){return this.curve_=(0,s.getCurve)(t),this}},{key:"add",value:function(t,e,i,n){return this.segments_.push({delay:t,func:e,duration:i,curve:(0,s.getCurve)(n)}),this}},{key:"start",value:function(t){var e=new u(this.vsync_,this.segments_,this.curve_,t);return e.start_(),e}}]),t}();i.Animation=h;var u=function(){function t(e,i,s,n){var r=this;babelHelpers.classCallCheck(this,t),this.segments_=[];for(var a=0;a<i.length;a++){var o=i[a];this.segments_.push({delay:o.delay,func:o.func,duration:o.duration,curve:o.curve||s,started:!1,completed:!1})}this.duration_=n,this.startTime_=0,this.normLinearTime_=0,this.normTime_=0,this.running_=!1,this.state_={},this.resolve_,this.reject_,this.promise_=new Promise(function(t,e){r.resolve_=t,r.reject_=e}),this.task_=e.createTask({mutate:this.stepMutate_.bind(this)})}return babelHelpers.createClass(t,[{key:"then",value:function(t,e){return t||e?this.promise_.then(t,e):this.promise_}},{key:"thenAlways",value:function(t){var e=t||l;return this.then(e,e)}},{key:"halt",value:function(t){this.complete_(!1,t||0)}},{key:"start_",value:function(){this.startTime_=r.timer.now(),this.running_=!0,this.task_(this.state_)}},{key:"complete_",value:function(t,e){if(this.running_){if(this.running_=!1,0!=e){this.segments_.length>1&&this.segments_.sort(function(t,e){return t.delay+t.duration-(e.delay+e.duration)});try{if(e>0)for(var i=0;i<this.segments_.length;i++)this.segments_[i].func(1,!0);else for(var i=this.segments_.length-1;i>=0;i--)this.segments_[i].func(0,!1)}catch(s){n.log.error(o,"completion failed: "+s,s),t=!1}}t?this.resolve_():this.reject_()}}},{key:"stepMutate_",value:function(t){if(this.running_){for(var e=r.timer.now(),i=Math.min((e-this.startTime_)/this.duration_,1),s=0;s<this.segments_.length;s++){var n=this.segments_[s];!n.started&&i>=n.delay&&(n.started=!0)}for(var s=0;s<this.segments_.length;s++){var n=this.segments_[s];n.started&&!n.completed&&this.mutateSegment_(n,i)}1==i?this.complete_(!0,0):this.task_(this.state_)}}},{key:"mutateSegment_",value:function(t,e){var i=void 0,s=void 0;if(t.duration>0){if(i=Math.min((e-t.delay)/t.duration,1),s=i,t.curve&&1!=s)try{s=t.curve(i)}catch(r){return n.log.error(o,"step curve failed: "+r,r),void this.complete_(!1,0)}}else i=1,s=1;1==i&&(t.completed=!0);try{t.func(s,t.completed)}catch(r){return n.log.error(o,"step mutate failed: "+r,r),void this.complete_(!1,0)}}}]),t}()},{"./curve":8,"./log":13,"./timer":21,"./vsync":25}],7:[function(t,e,i){function s(t,e,i){var s=void 0;if(!t){e=e||"Assertion failed";var a=e.split("%s"),o=a.shift(),l=o,h=[];r(h,o);for(var u=2;u<arguments.length;u++){var c=arguments[u];c&&c.tagName&&(s=c);var _=a.shift();h.push(c),r(h,_.trim()),l+=n(c)+_}var v=new Error(l);throw v.fromAssert=!0,v.associatedElement=s,v.messageArray=h,v}return t}function n(t){return t instanceof Element?t.tagName.toLowerCase()+(t.id?"#"+t.id:""):t}function r(t,e){""!=e&&t.push(e)}Object.defineProperty(i,"__esModule",{value:!0}),i.assert=s},{}],8:[function(t,e,i){function s(t,e,i,s){var n=new r(0,0,t,e,i,s,1,1);return n.solveYValueFromXValue.bind(n)}function n(t){return t?"string"==typeof t?o[t]:t:null}Object.defineProperty(i,"__esModule",{value:!0}),i.bezierCurve=s,i.getCurve=n;var r=function(){function t(e,i,s,n,r,a,o,l){babelHelpers.classCallCheck(this,t),this.x0=e,this.y0=i,this.x1=s,this.y1=n,this.x2=r,this.y2=a,this.x3=o,this.y3=l}return babelHelpers.createClass(t,[{key:"solveYValueFromXValue",value:function(t){return this.getPointY(this.solvePositionFromXValue(t))}},{key:"solvePositionFromXValue",value:function(t){var e=1e-6,i=(t-this.x0)/(this.x3-this.x0);if(0>=i)return 0;if(i>=1)return 1;for(var s=0,n=1,r=0;8>r;r++){var a=this.getPointX(i),o=(this.getPointX(i+e)-a)/e;if(Math.abs(a-t)<e)return i;if(Math.abs(o)<e)break;t>a?s=i:n=i,i-=(a-t)/o}for(var r=0;Math.abs(value-t)>e&&8>r;r++)value<t?(s=i,i=(i+n)/2):(n=i,i=(i+s)/2),value=this.getPointX(i);return i}},{key:"getPointX",value:function(t){if(0==t)return this.x0;if(1==t)return this.x3;var e=this.lerp(this.x0,this.x1,t),i=this.lerp(this.x1,this.x2,t),s=this.lerp(this.x2,this.x3,t);return e=this.lerp(e,i,t),i=this.lerp(i,s,t),this.lerp(e,i,t)}},{key:"getPointY",value:function(t){if(0==t)return this.y0;if(1==t)return this.y3;var e=this.lerp(this.y0,this.y1,t),i=this.lerp(this.y1,this.y2,t),s=this.lerp(this.y2,this.y3,t);return e=this.lerp(e,i,t),i=this.lerp(i,s,t),this.lerp(e,i,t)}},{key:"lerp",value:function(t,e,i){return t+i*(e-t)}}]),t}(),a={LINEAR:function(t){return t},EASE:s(.25,.1,.25,1),EASE_IN:s(.42,0,1,1),EASE_OUT:s(0,0,.58,1),EASE_IN_OUT:s(.42,0,.58,1)};i.Curves=a;var o={linear:a.LINEAR,ease:a.EASE,"ease-in":a.EASE_IN,"ease-out":a.EASE_OUT,"ease-in-out":a.EASE_IN_OUT}},{}],9:[function(t,e,i){function s(t){return"loading"!=t.readyState}function n(t,e){var i=s(t);i?e():!function(){var s=function(){"loading"!=t.readyState&&(i||(i=!0,e()),t.removeEventListener("readystatechange",s))};t.addEventListener("readystatechange",s)}()}function r(t){return new u(t)}function a(t){return(0,l.getService)(t,"documentState",function(){return r(t)})}Object.defineProperty(i,"__esModule",{value:!0}),i.isDocumentReady=s,i.onDocumentReady=n,i.documentStateFor=a;var o=t("./observable"),l=t("./service"),h=t("./style"),u=function(){function t(e){if(babelHelpers.classCallCheck(this,t),this.win=e,this.document_=e.document,this.hiddenProp_=(0,h.getVendorJsPropertyName)(this.document_,"hidden",!0),void 0===this.document_[this.hiddenProp_]&&(this.hiddenProp_=null),this.visibilityStateProp_=(0,h.getVendorJsPropertyName)(this.document_,"visibilityState",!0),void 0===this.document_[this.visibilityStateProp_]&&(this.visibilityStateProp_=null),this.visibilityObservable_=new o.Observable,this.visibilityChangeEvent_=null,this.hiddenProp_){this.visibilityChangeEvent_="visibilitychange";var i=this.hiddenProp_.indexOf("Hidden");-1!=i&&(this.visibilityChangeEvent_=this.hiddenProp_.substring(0,i)+"Visibilitychange")}this.boundOnVisibilityChanged_=this.onVisibilityChanged_.bind(this),this.visibilityChangeEvent_&&this.document_.addEventListener(this.visibilityChangeEvent_,this.boundOnVisibilityChanged_)}return babelHelpers.createClass(t,[{key:"cleanup_",value:function(){this.visibilityChangeEvent_&&this.document_.removeEventListener(this.visibilityChangeEvent_,this.boundOnVisibilityChanged_)}},{key:"isReady",value:function(){return s(this.document_)}},{key:"onReady",value:function(t){return n(this.document_,t)}},{key:"isHidden",value:function(){return this.hiddenProp_?this.document_[this.hiddenProp_]:!1}},{key:"getVisibilityState",value:function(){return this.visibilityStateProp_?this.document_[this.visibilityStateProp_]:this.isHidden()?"hidden":"visible"}},{key:"onVisibilityChanged",value:function(t){return this.visibilityObservable_.add(t)}},{key:"onVisibilityChanged_",value:function(){this.visibilityObservable_.fire()}}]),t}();i.DocumentState=u},{"./observable":16,"./service":19,"./style":20}],10:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0});var s=t("./gesture"),n=(t("./asserts"),t("./motion")),r=t("./timer"),a=function(t){function e(t){babelHelpers.classCallCheck(this,e),babelHelpers.get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,"tap",t),this.startX_=0,this.startY_=0,this.lastX_=0,this.lastY_=0}return babelHelpers.inherits(e,t),babelHelpers.createClass(e,[{key:"onTouchStart",value:function(t){var e=t.touches;return e&&1==e.length?(this.startX_=e[0].clientX,this.startY_=e[0].clientY,!0):!1}},{key:"onTouchMove",value:function(t){var e=t.changedTouches||t.touches;if(e&&1==e.length){this.lastX_=e[0].clientX,this.lastY_=e[0].clientY;var i=Math.abs(this.lastX_-this.startX_)>=8,s=Math.abs(this.lastY_-this.startY_)>=8;if(i||s)return!1}return!0}},{key:"onTouchEnd",value:function(t){this.signalReady(0)}},{key:"acceptStart",value:function(){this.signalEmit({clientX:this.lastX_,clientY:this.lastY_},null),this.signalEnd()}}]),e}(s.GestureRecognizer);i.TapRecognizer=a;var o=function(t){function e(t){babelHelpers.classCallCheck(this,e),babelHelpers.get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,"doubletap",t),this.startX_=0,this.startY_=0,this.lastX_=0,this.lastY_=0,this.tapCount_=0}return babelHelpers.inherits(e,t),babelHelpers.createClass(e,[{key:"onTouchStart",value:function(t){if(this.tapCount_>1)return!1;var e=t.touches;return e&&1==e.length?(this.startX_=e[0].clientX,this.startY_=e[0].clientY,!0):!1}},{key:"onTouchMove",value:function(t){var e=t.changedTouches||t.touches;if(e&&1==e.length){this.lastX_=e[0].clientX,this.lastY_=e[0].clientY;var i=Math.abs(this.lastX_-this.startX_)>=8,s=Math.abs(this.lastY_-this.startY_)>=8;if(i||s)return this.acceptCancel(),!1}return!0}},{key:"onTouchEnd",value:function(t){this.tapCount_++,this.tapCount_<2?this.signalPending(300):this.signalReady(0)}},{key:"acceptStart",value:function(){this.tapCount_=0,this.signalEmit({clientX:this.lastX_,clientY:this.lastY_},null),this.signalEnd()}},{key:"acceptCancel",value:function(){this.tapCount_=0}}]),e}(s.GestureRecognizer);i.DoubletapRecognizer=o;var l=function(t){function e(t,i,s,n){babelHelpers.classCallCheck(this,e),babelHelpers.get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i),this.horiz_=s,this.vert_=n,this.eventing_=!1,this.startX_=0,this.startY_=0,this.lastX_=0,this.lastY_=0,this.prevX_=0,this.prevY_=0,this.startTime_=0,this.lastTime_=0,this.prevTime_=0,this.velocityX_=0,this.velocityY_=0}return babelHelpers.inherits(e,t),babelHelpers.createClass(e,[{key:"onTouchStart",value:function(t){var e=t.touches;return e&&1==e.length?(this.startTime_=r.timer.now(),this.startX_=e[0].clientX,this.startY_=e[0].clientY,!0):!1}},{key:"onTouchMove",value:function(t){var e=t.changedTouches||t.touches;if(e&&1==e.length){var i=e[0].clientX,s=e[0].clientY;if(this.lastX_=i,this.lastY_=s,this.eventing_)this.emit_(!1,!1,t);else{var n=Math.abs(i-this.startX_),r=Math.abs(s-this.startY_);if(this.horiz_&&this.vert_)(n>=8||r>=8)&&this.signalReady(-10);else if(this.horiz_){if(n>=8&&n>r)this.signalReady(-10);else if(r>=8)return!1}else{if(!this.vert_)return!1;if(r>=8&&r>n)this.signalReady(-10);else if(n>=8)return!1}}}return!0}},{key:"onTouchEnd",value:function(t){this.end_(t)}},{key:"acceptStart",value:function(){this.eventing_=!0,this.prevX_=this.startX_,this.prevY_=this.startY_,this.prevTime_=this.startTime_,this.startX_=this.lastX_,this.startY_=this.lastY_,this.emit_(!0,!1,null)}},{key:"acceptCancel",value:function(){this.eventing_=!1}},{key:"emit_",value:function(t,e,i){this.lastTime_=r.timer.now();var s=this.lastTime_-this.prevTime_;(!e&&s>4||e&&s>16)&&(this.velocityX_=(0,n.calcVelocity)(this.lastX_-this.prevX_,s,this.velocityX_),this.velocityY_=(0,n.calcVelocity)(this.lastY_-this.prevY_,s,this.velocityY_),this.velocityX_=Math.abs(this.velocityX_)>1e-4?this.velocityX_:0,this.velocityY_=Math.abs(this.velocityY_)>1e-4?this.velocityY_:0,this.prevX_=this.lastX_,this.prevY_=this.lastY_,this.prevTime_=this.lastTime_),this.signalEmit({first:t,last:e,time:this.lastTime_,deltaX:this.horiz_?this.lastX_-this.startX_:0,deltaY:this.vert_?this.lastY_-this.startY_:0,velocityX:this.horiz_?this.velocityX_:0,velocityY:this.vert_?this.velocityY_:0},i)}},{key:"end_",value:function(t){this.eventing_&&(this.eventing_=!1,this.emit_(!1,!0,t),this.signalEnd())}}]),e}(s.GestureRecognizer),h=function(t){function e(t){babelHelpers.classCallCheck(this,e),babelHelpers.get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,"swipe-xy",t,!0,!0)}return babelHelpers.inherits(e,t),e}(l);i.SwipeXYRecognizer=h;var u=function(t){function e(t){babelHelpers.classCallCheck(this,e),babelHelpers.get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,"swipe-x",t,!0,!1)}return babelHelpers.inherits(e,t),e}(l);i.SwipeXRecognizer=u;var c=function(t){function e(t){babelHelpers.classCallCheck(this,e),babelHelpers.get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,"swipe-y",t,!1,!0)}return babelHelpers.inherits(e,t),e}(l);i.SwipeYRecognizer=c;var _=function(t){function e(t){babelHelpers.classCallCheck(this,e),babelHelpers.get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,"tapzoom",t),this.eventing_=!1,this.startX_=0,this.startY_=0,this.lastX_=0,this.lastY_=0,this.tapX_=0,this.tapY_=0,this.tapCount_=0,this.prevX_=0,this.prevY_=0,this.startTime_=0,this.lastTime_=0,this.prevTime_=0,this.velocityX_=0,this.velocityY_=0}return babelHelpers.inherits(e,t),babelHelpers.createClass(e,[{key:"onTouchStart",value:function(t){if(this.eventing_)return!1;var e=t.touches;return e&&1==e.length?(this.startX_=e[0].clientX,this.startY_=e[0].clientY,!0):!1}},{key:"onTouchMove",value:function(t){var e=t.changedTouches||t.touches;if(e&&1==e.length)if(this.lastX_=e[0].clientX,this.lastY_=e[0].clientY,this.eventing_)this.emit_(!1,!1,t);else{var i=Math.abs(this.lastX_-this.startX_)>=8,s=Math.abs(this.lastY_-this.startY_)>=8;if(i||s){if(0==this.tapCount_)return this.acceptCancel(),!1;this.signalReady(0)}}return!0}},{key:"onTouchEnd",value:function(t){return this.eventing_?void this.end_(t):(this.tapCount_++,1==this.tapCount_?(this.signalPending(400),this.tapX_=this.lastX_,void(this.tapY_=this.lastY_)):void this.acceptCancel())}},{key:"acceptStart",value:function(){this.tapCount_=0,this.eventing_=!0,this.emit_(!0,!1,null)}},{key:"acceptCancel",value:function(){this.tapCount_=0,this.eventing_=!1}},{key:"emit_",value:function(t,e,i){this.lastTime_=r.timer.now(),t?(this.startTime_=this.lastTime_,this.velocityX_=this.velocityY_=0):this.lastTime_-this.prevTime_>2&&(this.velocityX_=(0,n.calcVelocity)(this.lastX_-this.prevX_,this.lastTime_-this.prevTime_,this.velocityX_),this.velocityY_=(0,n.calcVelocity)(this.lastY_-this.prevY_,this.lastTime_-this.prevTime_,this.velocityY_)),this.prevX_=this.lastX_,this.prevY_=this.lastY_,this.prevTime_=this.lastTime_,this.signalEmit({first:t,last:e,centerClientX:this.startX_,centerClientY:this.startY_,deltaX:this.lastX_-this.startX_,deltaY:this.lastY_-this.startY_,velocityX:this.velocityX_,velocityY:this.velocityY_},i)}},{key:"end_",value:function(t){this.eventing_&&(this.eventing_=!1,this.emit_(!1,!0,t),this.signalEnd())}}]),e}(s.GestureRecognizer);i.TapzoomRecognizer=_;var v=function(t){function e(t){babelHelpers.classCallCheck(this,e),babelHelpers.get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,"pinch",t),this.eventing_=!1,this.startX1_=0,this.startY1_=0,this.startX2_=0,this.startY2_=0,this.lastX1_=0,this.lastY1_=0,this.lastX2_=0,this.lastY2_=0,this.prevDeltaX_=0,this.prevDeltaY_=0,this.centerClientX_=0,this.centerClientY_=0,this.startTime_=0,this.lastTime_=0,this.prevTime_=0,this.velocityX_=0,this.velocityY_=0}return babelHelpers.inherits(e,t),babelHelpers.createClass(e,[{key:"onTouchStart",value:function(t){var e=t.touches;return e&&2==e.length?(this.startTime_=r.timer.now(),this.startX1_=e[0].clientX,this.startY1_=e[0].clientY,this.startX2_=e[1].clientX,this.startY2_=e[1].clientY,!0):!1}},{key:"onTouchMove",value:function(t){var e=t.touches;if(!e||2!=e.length)return!1;if(this.lastX1_=e[0].clientX,this.lastY1_=e[0].clientY,this.lastX2_=e[1].clientX,this.lastY2_=e[1].clientY,this.eventing_)this.emit_(!1,!1,t);else{var i=this.lastX1_-this.startX1_,s=this.lastY1_-this.startY1_,n=this.lastX2_-this.startX2_,r=this.lastY2_-this.startY2_;if(0>=i*n&&0>=s*r)(Math.abs(i-n)>=8||Math.abs(s-r)>=8)&&this.signalReady(0);else if(Math.abs(i+n)>=8||Math.abs(s+r)>=8)return!1}return!0}},{key:"onTouchEnd",value:function(t){this.end_(t)}},{key:"acceptStart",value:function(){this.eventing_=!0,this.prevTime_=this.startTime_,this.prevDeltaX_=0,this.prevDeltaY_=0,this.centerClientX_=.5*(this.startX1_+this.startX2_),
this.centerClientY_=.5*(this.startY1_+this.startY2_),this.emit_(!0,!1,null)}},{key:"acceptCancel",value:function(){this.eventing_=!1}},{key:"emit_",value:function(t,e,i){this.lastTime_=r.timer.now();var s=this.lastTime_-this.prevTime_,a=this.deltaX_(),o=this.deltaY_();(!e&&s>4||e&&s>16)&&(this.velocityX_=(0,n.calcVelocity)(a-this.prevDeltaX_,s,this.velocityX_),this.velocityY_=(0,n.calcVelocity)(o-this.prevDeltaY_,s,this.velocityY_),this.velocityX_=Math.abs(this.velocityX_)>1e-4?this.velocityX_:0,this.velocityY_=Math.abs(this.velocityY_)>1e-4?this.velocityY_:0,this.prevDeltaX_=a,this.prevDeltaY_=o,this.prevTime_=this.lastTime_);var l=this.sqDist_(this.startX1_,this.startX2_,this.startY1_,this.startY2_),h=this.sqDist_(this.lastX1_,this.lastX2_,this.lastY1_,this.lastY2_);this.signalEmit({first:t,last:e,time:this.lastTime_,centerClientX:this.centerClientX_,centerClientY:this.centerClientY_,dir:Math.sign(h-l),deltaX:.5*a,deltaY:.5*o,velocityX:.5*this.velocityX_,velocityY:.5*this.velocityY_},i)}},{key:"end_",value:function(t){this.eventing_&&(this.eventing_=!1,this.emit_(!1,!0,t),this.signalEnd())}},{key:"sqDist_",value:function(t,e,i,s){return(t-e)*(t-e)+(i-s)*(i-s)}},{key:"deltaX_",value:function(){return Math.abs(this.lastX1_-this.startX1_-(this.lastX2_-this.startX2_))}},{key:"deltaY_",value:function(){return Math.abs(this.lastY1_-this.startY1_-(this.lastY2_-this.startY2_))}}]),e}(s.GestureRecognizer);i.PinchRecognizer=v},{"./asserts":7,"./gesture":11,"./motion":15,"./timer":21}],11:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0});var s=t("./observable"),n=t("./asserts"),r=(t("./motion"),t("./pass")),a=t("./timer"),o="__AMP_Gestures",l=function c(t,e,i,s){babelHelpers.classCallCheck(this,c),this.type=t,this.data=e,this.time=i,this.event=s};i.Gesture=l;var h=function(){function t(e){babelHelpers.classCallCheck(this,t),this.element_=e,this.recognizers_=[],this.tracking_=[],this.ready_=[],this.pending_=[],this.eventing_=null,this.wasEventing_=!1,this.pass_=new r.Pass(this.doPass_.bind(this)),this.pointerDownObservable_=new s.Observable,this.overservers_=Object.create(null),this.boundOnTouchStart_=this.onTouchStart_.bind(this),this.boundOnTouchEnd_=this.onTouchEnd_.bind(this),this.boundOnTouchMove_=this.onTouchMove_.bind(this),this.boundOnTouchCancel_=this.onTouchCancel_.bind(this),this.element_.addEventListener("touchstart",this.boundOnTouchStart_),this.element_.addEventListener("touchend",this.boundOnTouchEnd_),this.element_.addEventListener("touchmove",this.boundOnTouchMove_),this.element_.addEventListener("touchcancel",this.boundOnTouchCancel_)}return babelHelpers.createClass(t,null,[{key:"get",value:function(e){var i=e[o];return i||(i=new t(e),e[o]=i),i}}]),babelHelpers.createClass(t,[{key:"cleanup",value:function(){this.element_.removeEventListener("touchstart",this.boundOnTouchStart_),this.element_.removeEventListener("touchend",this.boundOnTouchEnd_),this.element_.removeEventListener("touchmove",this.boundOnTouchMove_),this.element_.removeEventListener("touchcancel",this.boundOnTouchCancel_),this.pass_.cancel()}},{key:"onGesture",value:function(t,e){var i=new t(this),n=i.getType(),r=this.overservers_[n];return r||(this.recognizers_.push(i),r=new s.Observable,this.overservers_[n]=r),r.add(e)}},{key:"onPointerDown",value:function(t){return this.pointerDownObservable_.add(t)}},{key:"onTouchStart_",value:function(t){var e=a.timer.now();this.wasEventing_=!1,this.pointerDownObservable_.fire(t);for(var i=0;i<this.recognizers_.length;i++)this.ready_[i]||(this.pending_[i]&&this.pending_[i]<e&&this.stopTracking_(i),this.recognizers_[i].onTouchStart(t)&&this.startTracking_(i));this.afterEvent_(t)}},{key:"onTouchMove_",value:function(t){for(var e=a.timer.now(),i=0;i<this.recognizers_.length;i++)this.tracking_[i]&&(this.pending_[i]&&this.pending_[i]<e?this.stopTracking_(i):this.recognizers_[i].onTouchMove(t)||this.stopTracking_(i));this.afterEvent_(t)}},{key:"onTouchEnd_",value:function(t){for(var e=a.timer.now(),i=0;i<this.recognizers_.length;i++)this.tracking_[i]&&(this.pending_[i]&&this.pending_[i]<e?this.stopTracking_(i):(this.recognizers_[i].onTouchEnd(t),(!this.pending_[i]||this.pending_[i]<e)&&this.stopTracking_(i)));this.afterEvent_(t)}},{key:"onTouchCancel_",value:function(t){for(var e=0;e<this.recognizers_.length;e++)this.cancelEventing_(e);this.afterEvent_(t)}},{key:"signalReady_",value:function(t,e){if(this.eventing_)return void t.acceptCancel();for(var i=a.timer.now(),s=0;s<this.recognizers_.length;s++)this.recognizers_[s]==t&&(this.ready_[s]=i+e,this.pending_[s]=0);this.passAfterEvent_=!0}},{key:"signalPending_",value:function(t,e){if(this.eventing_)return void t.acceptCancel();for(var i=a.timer.now(),s=0;s<this.recognizers_.length;s++)this.recognizers_[s]==t&&(this.pending_[s]=i+e)}},{key:"signalEnd_",value:function(t){this.eventing_==t&&(this.eventing_=null,this.wasEventing_=!0)}},{key:"signalEmit_",value:function(t,e,i){(0,n.assert)(this.eventing_==t,"Recognizer is not currently allowed: %s",t.getType());var s=this.overservers_[t.getType()];s&&s.fire(new l(t.getType(),e,a.timer.now(),i))}},{key:"afterEvent_",value:function(t){var e=!!this.eventing_||this.wasEventing_;if(this.wasEventing_=!1,!e)for(var i=a.timer.now(),s=0;s<this.recognizers_.length;s++)if(this.ready_[s]||this.pending_[s]&&this.pending_[s]>=i){e=!0;break}e&&(t.stopPropagation(),t.preventDefault()),this.passAfterEvent_&&(this.passAfterEvent_=!1,this.doPass_())}},{key:"doPass_",value:function(){for(var t=a.timer.now(),e=-1,i=0;i<this.recognizers_.length;i++)this.ready_[i]?(-1==e||this.ready_[i]>this.ready_[e])&&(e=i):this.pending_[i]&&this.pending_[i]<t&&this.stopTracking_(i);if(-1!=e){for(var s=0,i=0;i<this.recognizers_.length;i++)!this.ready_[i]&&this.tracking_[i]&&(s=Math.max(s,this.pending_[i]-t));return 2>s?void this.startEventing_(e):void this.pass_.schedule(s)}}},{key:"startEventing_",value:function(t){for(var e=this.recognizers_[t],i=0;i<this.recognizers_.length;i++)i!=t&&this.cancelEventing_(i);this.ready_[t]=0,this.pending_[t]=0,this.eventing_=e,e.acceptStart()}},{key:"startTracking_",value:function(t){this.tracking_[t]=!0,this.pending_[t]=0}},{key:"stopTracking_",value:function(t){this.tracking_[t]=!1,this.pending_[t]=0,this.ready_[t]||this.recognizers_[t].acceptCancel()}},{key:"cancelEventing_",value:function(t){this.ready_[t]=0,this.stopTracking_(t)}}]),t}();i.Gestures=h;var u=function(){function t(e,i){babelHelpers.classCallCheck(this,t),this.type_=e,this.manager_=i}return babelHelpers.createClass(t,[{key:"getType",value:function(){return this.type_}},{key:"signalReady",value:function(t){this.manager_.signalReady_(this,t)}},{key:"signalPending",value:function(t){this.manager_.signalPending_(this,t)}},{key:"signalEnd",value:function(){this.manager_.signalEnd_(this)}},{key:"signalEmit",value:function(t,e){this.manager_.signalEmit_(this,t,e)}},{key:"acceptStart",value:function(){}},{key:"acceptCancel",value:function(){}},{key:"onTouchStart",value:function(t){return!1}},{key:"onTouchMove",value:function(t){return!1}},{key:"onTouchEnd",value:function(t){}}]),t}();i.GestureRecognizer=u},{"./asserts":7,"./motion":15,"./observable":16,"./pass":17,"./timer":21}],12:[function(t,e,i){function s(t){for(var e in p)if(p[e]==t)return p[e];return void 0}function n(t){return"-amp-layout-"+t}function r(t){return t==p.FIXED||t==p.FIXED_HEIGHT||t==p.RESPONSIVE||t==p.FILL}function a(t){var e="string"==typeof t?t:t.tagName;return e&&0==e.toLowerCase().indexOf("i-")}function o(t){return"number"==typeof t?t+"px":t&&/^\d+(\.\d+)?(px|em|rem|vh|vw|vmin|vmax)?$/.test(t)?/^\d+(\.\d+)?$/.test(t)?t+"px":t:void 0}function l(t){return(0,d.assert)(/^\d+(\.\d+)?(px|em|rem|vh|vw|vmin|vmax)$/.test(t),"Invalid length value: %s",t),t}function h(t){l(t);var e=(0,d.assert)(t.match(/[a-z]+/i),"Failed to read units from %s",t);return e[0]}function u(t){return parseFloat(t)}function c(t){return t=t.toUpperCase(),void 0!==f[t]}function _(t){if(t=t.toUpperCase(),!f[t]){var e=t.replace(/^AMP\-/,""),i=document.createElement(e);i.controls=!0,i.style.position="absolute",i.style.visibility="hidden",document.body.appendChild(i),f[t]={width:i.offsetWidth||1,height:i.offsetHeight||1},document.body.removeChild(i)}return f[t]}function v(t){return y[t.toUpperCase()]||!1}Object.defineProperty(i,"__esModule",{value:!0}),i.parseLayout=s,i.getLayoutClass=n,i.isLayoutSizeDefined=r,i.isInternalElement=a,i.parseLength=o,i.assertLength=l,i.getLengthUnits=h,i.getLengthNumeral=u,i.hasNaturalDimensions=c,i.getNaturalDimensions=_,i.isLoadingAllowed=v;var d=t("./asserts"),p={NODISPLAY:"nodisplay",FIXED:"fixed",FIXED_HEIGHT:"fixed-height",RESPONSIVE:"responsive",CONTAINER:"container",FILL:"fill"};i.Layout=p;var f={"AMP-PIXEL":{width:1,height:1},"AMP-AUDIO":null};i.naturalDimensions_=f;var y={"AMP-ANIM":!0,"AMP-IFRAME":!0,"AMP-IMG":!0,"AMP-INSTAGRAM":!0,"AMP-PINTEREST":!0,"AMP-VIDEO":!0};i.LOADING_ELEMENTS_=y},{"./asserts":7}],13:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0});var s=t("./mode"),n=(new Date).getTime(),r=function(){function t(e){babelHelpers.classCallCheck(this,t),this.win=e.AMP_TEST?e.parent:e,this.isEnabled_=this.shouldBeEnabled_()}return babelHelpers.createClass(t,[{key:"shouldBeEnabled_",value:function(){if(!this.win.console||!this.win.console.log)return!1;var t=this.win.location.hash.match(/log=(\d)/),e=t&&t[1];return(0,s.getMode)().localDev&&"0"!=e?!0:this.win.location.hash&&"1"==e?!0:!1}},{key:"msg_",value:function(t,e,i){if(this.isEnabled_){var s=this.win.console.log;"ERROR"==e?s=this.win.console.error||s:"INFO"==e?s=this.win.console.info||s:"WARN"==e&&(s=this.win.console.warn||s),i.unshift((new Date).getTime()-n,"["+t+"]"),s.apply(this.win.console,i)}}},{key:"fine",value:function(t,e){this.isEnabled_&&this.msg_(t,"FINE",Array.prototype.slice.call(arguments,1))}},{key:"info",value:function(t,e){this.isEnabled_&&this.msg_(t,"INFO",Array.prototype.slice.call(arguments,1))}},{key:"warn",value:function(t,e){this.isEnabled_&&this.msg_(t,"WARN",Array.prototype.slice.call(arguments,1))}},{key:"error",value:function(t,e){this.isEnabled_&&this.msg_(t,"ERROR",Array.prototype.slice.call(arguments,1))}}]),t}();i.Log=r;var a=new r(window);i.log=a},{"./mode":14}],14:[function(t,e,i){(function(e){function s(){return o?o:o=r()}function n(t){o=t}function r(){var t=("localhost"==location.hostname||location.ancestorOrigins&&location.ancestorOrigins[0]&&0==location.ancestorOrigins[0].indexOf("http://localhost:"))&&!!document.querySelector('script[src*="/dist/"],script[src*="/base/"]'),i=(0,a.parseQueryString)(location.hash).development,s=void 0!=i?"1"==i:!!document.querySelector("script[development]");return{localDev:t,development:s,minified:"production"==e.env.NODE_ENV,test:window.AMP_TEST}}Object.defineProperty(i,"__esModule",{value:!0}),i.getMode=s,i.setModeForTesting=n;var a=t("./url"),o=null}).call(this,t("_process"))},{"./url":23,_process:5}],15:[function(t,e,i){function s(t,e,i){1>e&&(e=1);var s=t/e,n=.5+Math.min(e/c,.5);return s*n+i*(1-n)}function n(t,e,i,s,n,r){return new _(t,e,i,s,n,r).start_()}Object.defineProperty(i,"__esModule",{value:!0}),i.calcVelocity=s,i.continueMotion=n;var r=(t("./asserts"),t("./timer")),a=t("./vsync"),o=function(){},l=.02,h=16.67,u=Math.round(-h/Math.log(.95)),c=2*h,_=function(){function t(e,i,s,n,o,l){var h=this;babelHelpers.classCallCheck(this,t),this.vsync_=l||(0,a.vsyncFor)(window),this.callback_=o,this.lastX_=e,this.lastY_=i,this.maxVelocityX_=s,this.maxVelocityY_=n,this.velocityX_=0,this.velocityY_=0,this.startTime_=r.timer.now(),this.lastTime_=this.startTime_,this.resolve_,this.reject_,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e})}return babelHelpers.createClass(t,[{key:"start_",value:function(){return this.continuing_=!0,Math.abs(this.maxVelocityX_)<=l&&Math.abs(this.maxVelocityY_)<=l?(this.fireMove_(),this.completeContinue_(!0)):this.runContinuing_(),this}},{key:"halt",value:function(){this.continuing_&&this.completeContinue_(!1)}},{key:"then",value:function(t,e){return t||e?this.promise_.then(t,e):this.promise_}},{key:"thenAlways",value:function(t){var e=t||o;return this.then(e,e)}},{key:"runContinuing_",value:function(){this.velocityX_=this.maxVelocityX_,this.velocityY_=this.maxVelocityY_;var t=this.stepContinue_.bind(this),e=this.completeContinue_.bind(this,!0);return this.vsync_.runMutateSeries(t,5e3).then(e,e)}},{key:"stepContinue_",value:function(t,e){if(!this.continuing_)return!1;this.lastX_,this.lastY_;if(this.lastTime_=r.timer.now(),this.lastX_+=e*this.velocityX_,this.lastY_+=e*this.velocityY_,!this.fireMove_())return!1;var i=Math.exp(-t/u);return this.velocityX_=this.maxVelocityX_*i,this.velocityY_=this.maxVelocityY_*i,Math.abs(this.velocityX_)>l||Math.abs(this.velocityY_)>l}},{key:"completeContinue_",value:function(t){this.continuing_&&(this.continuing_=!1,this.lastTime_=r.timer.now(),this.fireMove_(),t?this.resolve_():this.reject_())}},{key:"fireMove_",value:function(){return this.callback_(this.lastX_,this.lastY_)}}]),t}()},{"./asserts":7,"./timer":21,"./vsync":25}],16:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(){babelHelpers.classCallCheck(this,t),this.handlers_=[]}return babelHelpers.createClass(t,[{key:"add",value:function(t){var e=this;return this.handlers_.push(t),function(){e.remove(t)}}},{key:"remove",value:function(t){for(var e=0;e<this.handlers_.length;e++)if(t==this.handlers_[e]){this.handlers_.splice(e,1);break}}},{key:"fire",value:function(t){this.handlers_.forEach(function(e){e(t)})}},{key:"getHandlerCount",value:function(){return this.handlers_.length}}]),t}();i.Observable=s},{}],17:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0});var s=t("./timer"),n=function(){function t(e,i){babelHelpers.classCallCheck(this,t),this.handler_=e,this.defaultDelay_=i||0,this.scheduled_=-1,this.nextTime_=0}return babelHelpers.createClass(t,[{key:"isPending",value:function(){return-1!=this.scheduled_}},{key:"schedule",value:function(t){var e=this,i=t||this.defaultDelay_,n=s.timer.now()+i;return-1==this.scheduled_||n-this.nextTime_<-10?(-1!=this.scheduled_&&s.timer.cancel(this.scheduled_),this.nextTime_=n,this.scheduled_=s.timer.delay(function(){e.scheduled_=-1,e.nextTime_=0,e.handler_()},i),!0):!1}},{key:"cancel",value:function(){-1!=this.scheduled_&&(s.timer.cancel(this.scheduled_),this.scheduled_=-1)}}]),t}();i.Pass=n},{"./timer":21}],18:[function(t,e,i){function s(t){return(0,n.getService)(t,"platform",function(){return new r(t)})}Object.defineProperty(i,"__esModule",{value:!0}),i.platformFor=s;var n=t("./service"),r=function(){function t(e){babelHelpers.classCallCheck(this,t),this.win=e}return babelHelpers.createClass(t,[{key:"isIos",value:function(){return/iPhone|iPad|iPod/i.test(this.win.navigator.userAgent)}},{key:"isSafari",value:function(){return/Safari/i.test(this.win.navigator.userAgent)&&!this.isChrome()}},{key:"isChrome",value:function(){return/Chrome|CriOS/i.test(this.win.navigator.userAgent)}}]),t}();i.Platform=r;var a=s(window);i.platform=a},{"./service":19}],19:[function(t,e,i){function s(t,e,i){var s=t.services;s||(s=t.services={});var n=s[e];return n?n:s[e]=i(t)}function n(t,e){t.services&&(t.services[e]=null)}Object.defineProperty(i,"__esModule",{value:!0}),i.getService=s,i.resetServiceForTesting=n},{}],20:[function(t,e,i){function s(t){return t.charAt(0).toUpperCase()+t.slice(1)}function n(t,e){for(var i=0;i<p.length;i++){var s=p[i]+e;if(void 0!==t[s])return s}return""}function r(t,e,i){var r=d[e];if(!r||i){if(r=e,void 0===t[e]){var a=s(e),o=n(t,a);void 0!==t[o]&&(r=o)}i||(d[e]=r)}return r}function a(t,e,i,s,n){var a=r(t.style,e,n);a&&(t.style[a]=s?i+s:i)}function o(t,e,i){var s=r(t.style,e,i);return s?t.style[s]:void 0}function l(t,e){for(var i in e)a(t,i,e[i])}function h(t,e){void 0===e&&(e=!("none"!=t.style.display)),t.style.display=e?"":"none"}function u(t){return t+"px"}function c(t){return"string"==typeof t?"translateX("+t+")":"translateX("+u(t)+")"}function _(t,e){return"number"==typeof t&&(t=u(t)),void 0===e?"translate("+t+")":("number"==typeof e&&(e=u(e)),"translate("+t+","+e+")")}function v(t){return"scale("+t+")"}Object.defineProperty(i,"__esModule",{value:!0}),i.camelCaseToTitleCase=s,i.getVendorJsPropertyName=r,i.setStyle=a,i.getStyle=o,i.setStyles=l,i.toggle=h,i.px=u,i.translateX=c,i.translate=_,i.scale=v;var d=Object.create(null),p=["Webkit","webkit","Moz","moz","ms","O","o"]},{}],21:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(e){babelHelpers.classCallCheck(this,t),this.win=e,this.resolved_=Promise.resolve(),this.taskCount_=0,this.canceled_={},this.startTime_=this.now()}return babelHelpers.createClass(t,[{key:"now",value:function(){return Number(new Date)}},{key:"timeSinceStart",value:function(){return this.now()-this.startTime_}},{key:"delay",value:function(t,e){var i=this;if(!e){var s=function(){var e="p"+i.taskCount_++;return i.resolved_.then(function(){return i.canceled_[e]?void delete i.canceled_[e]:void t()}),{v:e}}();if("object"==typeof s)return s.v}return this.win.setTimeout(t,e)}},{key:"cancel",value:function(t){return"string"==typeof t?void(this.canceled_[t]=!0):void this.win.clearTimeout(t)}},{key:"promise",value:function(t,e){var i=this,s=null;return new Promise(function(n,r){s=i.delay(function(){s=-1,n(e)},t),-1==s&&r(new Error("Failed to schedule timer."))})["catch"](function(t){return-1!=s&&i.cancel(s),Promise.reject(t)})}},{key:"timeoutPromise",value:function(t,e){var i=this,s=null,n=new Promise(function(e,n){s=i.delay(function(){s=-1,n("timeout")},t),-1==s&&n(new Error("Failed to schedule timer."))})["catch"](function(t){return-1!=s&&i.cancel(s),Promise.reject(t)});return e?new Promise(function(t,i){n.then(t,i),e.then(t,i)}):n}}]),t}();i.Timer=s;var n=new s(window);i.timer=n},{}],22:[function(t,e,i){function s(t){return function(e,i){for(var s=0;s<t.length;s++){var n=t[s];n(e,i)}}}function n(t,e){return e=(0,_.getCurve)(e),function(i,s){return t(s?1:e(i),s)}}function r(t,e){return function(i,s){for(var n in e)d.setStyle(t,n,e[n](i,s))}}function a(t,e){return function(i){return t+(e-t)*i}}function o(t,e,i,s){return e==i?function(i){return a(t,e)(i)}:function(n){return s>n?t+(i-t)*(n/s):i+(e-i)*((n-s)/(1-s))}}function l(t){return function(e){return t(e)+"px"}}function h(t){return function(e){var i=t(e);return"string"==typeof i?"translateX("+i+")":"translateX("+i+"px)"}}function u(t,e){return function(i){var s=t(i);if("number"==typeof s&&(s=d.px(s)),!e)return"translate("+s+")";var n=e(i);return"number"==typeof n&&(n=d.px(n)),"translate("+s+","+n+")"}}function c(t){return function(e){return"scale("+t(e)+")"}}Object.defineProperty(i,"__esModule",{value:!0}),i.all=s,i.withCurve=n,i.setStyles=r,i.numeric=a,i.spring=o,i.px=l,i.translateX=h,i.translate=u,i.scale=c;var _=t("./curve"),v=t("./style"),d=babelHelpers.interopRequireWildcard(v),p=function(t){return null};i.NOOP=p},{"./curve":8,"./style":20}],23:[function(t,e,i){function s(t){var e=document.createElement("a");e.href=t;var i={href:e.href,protocol:e.protocol,host:e.host,hostname:e.hostname,port:"0"==e.port?"":e.port,pathname:e.pathname,search:e.search,hash:e.hash};return i.origin=e.origin&&"null"!=e.origin?e.origin:a(i),(0,l.assert)(i.origin,"Origin must exist"),i}function n(t,e){var i=s(t);return(0,l.assert)("https:"==i.protocol||/^(\/\/)/.test(t)||"localhost"==i.hostname||i.hostname.lastIndexOf(".localhost")==i.hostname.length-".localhost".length,'%s source must start with "https://" or "//" or be relative and served from https. Invalid value: %s',e,t),t}function r(t){var e=Object.create(null);if(!t)return e;(0==t.indexOf("?")||0==t.indexOf("#"))&&(t=t.substr(1));for(var i=t.split("&"),s=0;s<i.length;s++){var n=i[s],r=n.indexOf("="),a=void 0,o=void 0;-1!=r?(a=decodeURIComponent(n.substring(0,r)).trim(),o=decodeURIComponent(n.substring(r+1)).trim()):(a=decodeURIComponent(n).trim(),o=""),a&&(e[a]=o)}return e}function a(t){return"data:"!=t.protocol&&t.host?t.protocol+"//"+t.host:t.href}function o(t){var e=t.indexOf("#");return-1==e?t:t.substring(0,e)}Object.defineProperty(i,"__esModule",{value:!0}),i.parseUrl=s,i.assertHttpsUrl=n,i.parseQueryString=r,i.getOrigin=a,i.removeFragment=o;var l=t("./asserts")},{"./asserts":7}],24:[function(t,e,i){function s(t,e){var i=(0,u.parseQueryString)(t);for(var s in i)e[s]=i[s]}function n(t){return(0,l.getService)(t,"viewer",function(){return new f(t)})}Object.defineProperty(i,"__esModule",{value:!0}),i.parseParams_=s,i.viewerFor=n;var r=t("./observable"),a=t("./asserts"),o=t("./document-state"),l=t("./service"),h=t("./log"),u=t("./url"),c=t("./platform"),_="Viewer",v="__AMP__",d={NATURAL:"natural",VIRTUAL:"virtual",NATURAL_IOS_EMBED:"natural-ios-embed"};i.ViewportType=d;var p={VISIBLE:"visible",HIDDEN:"hidden"};i.VisibilityState=p;var f=function(){function t(e){var i=this;if(babelHelpers.classCallCheck(this,t),this.win=e,this.isEmbedded_=this.win.parent&&this.win.parent!=this.win,this.docState_=(0,o.documentStateFor)(window),this.isRuntimeOn_=!0,this.overtakeHistory_=!1,this.visibilityState_=p.VISIBLE,this.prerenderSize_=1,this.viewportType_=d.NATURAL,this.viewportWidth_=0,this.viewportHeight_=0,this.scrollTop_=0,this.paddingTop_=0,this.runtimeOnObservable_=new r.Observable,this.visibilityObservable_=new r.Observable,this.viewportObservable_=new r.Observable,this.historyPoppedObservable_=new r.Observable,this.messageDeliverer_=null,this.messageQueue_=[],this.params_={},this.win.name&&0==this.win.name.indexOf(v)&&s(this.win.name.substring(v.length),this.params_),this.win.location.hash&&s(this.win.location.hash,this.params_),h.log.fine(_,"Viewer params:",this.params_),this.isRuntimeOn_=!parseInt(this.params_.off,10),h.log.fine(_,"- runtimeOn:",this.isRuntimeOn_),this.overtakeHistory_=parseInt(this.params_.history,10)||this.overtakeHistory_,h.log.fine(_,"- history:",this.overtakeHistory_),this.visibilityState_=this.params_.visibilityState||this.visibilityState_,h.log.fine(_,"- visibilityState:",this.visibilityState_),this.prerenderSize_=parseInt(this.params_.prerenderSize,10)||this.prerenderSize_,h.log.fine(_,"- prerenderSize:",this.prerenderSize_),this.viewportType_=this.params_.viewportType||this.viewportType_,this.viewportType_==d.NATURAL&&this.isEmbedded_&&c.platform.isIos()&&(this.viewportType_=d.NATURAL_IOS_EMBED),h.log.fine(_,"- viewportType:",this.viewportType_),this.viewportWidth_=parseInt(this.params_.width,10)||this.viewportWidth_,h.log.fine(_,"- viewportWidth:",this.viewportWidth_),this.viewportHeight_=parseInt(this.params_.height,10)||this.viewportHeight_,h.log.fine(_,"- viewportHeight:",this.viewportHeight_),this.scrollTop_=parseInt(this.params_.scrollTop,10)||this.scrollTop_,h.log.fine(_,"- scrollTop:",this.scrollTop_),this.paddingTop_=parseInt(this.params_.paddingTop,10)||this.paddingTop_,h.log.fine(_,"- padding-top:",this.paddingTop_),this.docState_.onVisibilityChanged(function(){i.visibilityObservable_.fire()}),this.isEmbedded_){var n=(0,u.removeFragment)(this.win.location.href);n!=this.win.location.href&&this.win.history.replaceState&&(this.win.history.replaceState({},"",n),h.log.fine(_,"replace url:"+this.win.location.href))}}return babelHelpers.createClass(t,[{key:"getParam",value:function(t){return this.params_[t]}},{key:"isEmbedded",value:function(){return this.isEmbedded_}},{key:"isRuntimeOn",value:function(){return this.isRuntimeOn_}},{key:"toggleRuntime",value:function(){this.isRuntimeOn_=!this.isRuntimeOn_,h.log.fine(_,"Runtime state:",this.isRuntimeOn_),this.runtimeOnObservable_.fire(this.isRuntimeOn_)}},{key:"onRuntimeState",value:function(t){return this.runtimeOnObservable_.add(t)}},{key:"isOvertakeHistory",value:function(){return this.overtakeHistory_}},{key:"getVisibilityState",value:function(){return this.visibilityState_}},{key:"isVisible",value:function(){return this.visibilityState_==p.VISIBLE&&!this.docState_.isHidden()}},{key:"getPrerenderSize",value:function(){return this.prerenderSize_}},{key:"getViewportType",value:function(){return this.viewportType_}},{key:"getViewportWidth",value:function(){return this.viewportWidth_}},{key:"getViewportHeight",value:function(){return this.viewportHeight_}},{key:"getScrollTop",value:function(){return this.scrollTop_}},{key:"getPaddingTop",value:function(){return this.paddingTop_}},{key:"onVisibilityChanged",value:function(t){return this.visibilityObservable_.add(t)}},{key:"onViewportEvent",value:function(t){return this.viewportObservable_.add(t)}},{key:"onHistoryPoppedEvent",value:function(t){return this.historyPoppedObservable_.add(t)}},{key:"postDocumentReady",value:function(t,e){this.sendMessage_("documentLoaded",{width:t,height:e},!1)}},{key:"postDocumentResized",value:function(t,e){this.sendMessage_("documentResized",{width:t,height:e},!1)}},{key:"requestFullOverlay",value:function(){return this.sendMessage_("requestFullOverlay",{},!0)}},{key:"cancelFullOverlay",value:function(){return this.sendMessage_("cancelFullOverlay",{},!0)}},{key:"postPushHistory",value:function(t){return this.sendMessage_("pushHistory",{stackIndex:t},!0)}},{key:"postPopHistory",value:function(t){return this.sendMessage_("popHistory",{stackIndex:t},!0)}},{key:"receiveMessage",value:function(t,e,i){return"viewport"==t?(void 0!==e.width&&(this.viewportWidth_=e.width),void 0!==e.height&&(this.viewportHeight_=e.height),void 0!==e.paddingTop&&(this.paddingTop_=e.paddingTop),void 0!==e.scrollTop&&(this.scrollTop_=e.scrollTop),void this.viewportObservable_.fire()):"historyPopped"==t?(this.historyPoppedObservable_.fire({newStackIndex:e.newStackIndex}),Promise.resolve()):"visibilitychange"==t?(void 0!==e.state&&(this.visibilityState_=e.state),void 0!==e.prerenderSize&&(this.prerenderSize_=e.prerenderSize),h.log.fine(_,"visibilitychange event:",this.visibilityState_,this.prerenderSize_),this.visibilityObservable_.fire(),Promise.resolve()):void h.log.fine(_,"unknown message:",t)}},{key:"setMessageDeliverer",value:function(t){var e=this;if((0,a.assert)(!this.messageDeliverer_,"message deliverer can only be set once"),this.messageDeliverer_=t,this.messageQueue_.length>0){var i=this.messageQueue_.slice(0);this.messageQueue_=[],i.forEach(function(t){e.messageDeliverer_(t.eventType,t.data,!1)})}}},{key:"sendMessage_",value:function(t,e,i){if(this.messageDeliverer_)return this.messageDeliverer_(t,e,i);for(var s=null,n=0;n<this.messageQueue_.length;n++)if(this.messageQueue_[n].eventType==t){s=this.messageQueue_[n];break}return s?s.data=e:this.messageQueue_.push({eventType:t,data:e}),i?Promise.resolve():void 0}}]),t}();i.Viewer=f},{"./asserts":7,"./document-state":9,"./log":13,"./observable":16,"./platform":18,"./service":19,"./url":23}],25:[function(t,e,i){function s(t){return(0,n.getService)(t,"vsync",function(){return new l(t)})}Object.defineProperty(i,"__esModule",{value:!0}),i.vsyncFor=s;var n=t("./service"),r=t("./log"),a=t("./timer"),o=t("./viewer"),l=function(){function t(e){babelHelpers.classCallCheck(this,t),this.win=e,this.raf_=this.getRaf_(),this.tasks_=[],this.states_=[],this.scheduled_=!1}return babelHelpers.createClass(t,[{key:"run",value:function(t,e){var i=this;if(!(0,o.viewerFor)(this.win).isVisible())return void r.log.fine("VSYNC","Did not schedule a vsync request, because document was invisible.");var s=e||{};this.tasks_.push(t),this.states_.push(s),this.scheduled_||(this.scheduled_=!0,this.raf_(function(){i.runScheduledTasks()}))}},{key:"runScheduledTasks",value:function(){this.scheduled_=!1;var t=this.tasks_,e=this.states_;this.tasks_=[],this.states_=[];for(var i=0;i<t.length;i++)t[i].measure&&t[i].measure(e[i]);for(var i=0;i<t.length;i++)t[i].mutate&&t[i].mutate(e[i])}},{key:"mutate",value:function(t){this.run({mutate:t})}},{key:"measure",value:function(t){this.run({measure:t})}},{key:"createTask",value:function(t){var e=this;return function(i){e.run(t,i)}}},{key:"runMutateSeries",value:function(t,e){var i=this;return new Promise(function(s,n){var r=a.timer.now(),o=0,l=i.createTask({mutate:function(i){var h=a.timer.now()-r,u=t(h,h-o,i);u?e&&h>e?n("timeout"):(o=h,l(i)):s()}});l({})})}},{key:"getRaf_",value:function(){var t=this,e=this.win.requestAnimationFrame||this.win.webkitRequestAnimationFrame;if(e)return e.bind(this.win);var i=0;return function(e){var s=(new Date).getTime(),n=Math.max(0,16-(s-i));i=s+n,t.win.setTimeout(e,n)}}}]),t}();i.Vsync=l},{"./log":13,"./service":19,"./timer":21,"./viewer":24}]},{},[1])});
//# sourceMappingURL=amp-carousel-0.1.js.map