(window.AMP=window.AMP||[]).push(function(e){!function t(e,r,n){function i(o,a){if(!r[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[o]={exports:{}};e[o][0].call(c.exports,function(t){var r=e[o][1][t];return i(r?r:t)},c,c.exports,t,e,r,n)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,r,n){var i=t("../../../src/layout"),s=t("../../../src/event-helper"),o=t("../../../src/srcset"),a=t("../../../src/style"),u=babelHelpers.interopRequireWildcard(a),l=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"isLayoutSupported",value:function(e){return(0,i.isLayoutSizeDefined)(e)}},{key:"isReadyToBuild",value:function(){return null!=this.element.firstChild}},{key:"buildCallback",value:function(){this.img_=new Image,this.propagateAttributes(["alt"],this.img_),this.applyFillContent(this.img_,!0),this.img_.width=(0,i.getLengthNumeral)(this.element.getAttribute("width")),this.img_.height=(0,i.getLengthNumeral)(this.element.getAttribute("height")),u.toggle(this.img_,!this.getPlaceholder()),this.element.appendChild(this.img_),this.srcset_=(0,o.parseSrcset)(this.element.getAttribute("srcset")||this.element.getAttribute("src")),this.loadPromise_=null}},{key:"isRelayoutNeeded",value:function(){return!0}},{key:"layoutCallback",value:function(){return this.updateImageSrc_()}},{key:"firstLayoutCompleted",value:function(){}},{key:"viewportCallback",value:function(e){var t=this;e&&this.loadPromise_?this.loadPromise_.then(function(){return t.updateInViewport_()}):this.updateInViewport_()}},{key:"documentInactiveCallback",value:function(){return this.img_.src="",!0}},{key:"updateInViewport_",value:function(){var e=this.isInViewport();this.togglePlaceholder(!e),u.toggle(this.img_,e)}},{key:"updateImageSrc_",value:function(){if(this.getLayoutWidth()<=0)return Promise.resolve();var e=this.srcset_.select(this.getLayoutWidth(),this.getDpr()).url;return e==this.img_.getAttribute("src")?Promise.resolve():(this.img_.setAttribute("src",e),this.loadPromise_=(0,s.loadPromise)(this.img_),this.loadPromise_)}}]),t}(e.BaseElement);e.registerElement("amp-anim",l)},{"../../../src/event-helper":3,"../../../src/layout":4,"../../../src/srcset":5,"../../../src/style":6}],2:[function(e,t,r){function n(e,t,r){var n=void 0;if(!e){t=t||"Assertion failed";var o=t.split("%s"),a=o.shift(),u=a,l=[];s(l,a);for(var c=2;c<arguments.length;c++){var h=arguments[c];h&&h.tagName&&(n=h);var d=o.shift();l.push(h),s(l,d.trim()),u+=i(h)+d}var f=new Error(u);throw f.fromAssert=!0,f.associatedElement=n,f.messageArray=l,f}return e}function i(e){return e instanceof Element?e.tagName.toLowerCase()+(e.id?"#"+e.id:""):e}function s(e,t){""!=t&&e.push(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.assert=n},{}],3:[function(e,t,r){function n(e,t,r,n){var i=n||!1,s=void 0,o=function(e){r(e),s()};return s=function(){e.removeEventListener(t,o,i)},e.addEventListener(t,o,i),s}function i(e,t,r,i){var s=void 0,o=new Promise(function(i,o){s=n(e,t,i,r)});return a(o,s,i)}function s(e){return e.complete||"complete"==e.readyState}function o(e,t){var r=void 0,i=void 0,o=new Promise(function(t,o){s(e)?t(e):(r="AUDIO"===e.tagName||"VIDEO"===e.tagName?n(e,"loadstart",function(){return t(e)}):n(e,"load",function(){return t(e)}),i=n(e,"error",o))});return a(o,function(){r&&r(),i&&i()},t)}function a(e,t,r){var n=void 0;return n=void 0===r?e:u.timer.timeoutPromise(r||0,e),t?n.then(function(e){return t(),e},function(e){throw t(),e}):n}Object.defineProperty(r,"__esModule",{value:!0}),r.listenOnce=n,r.listenOncePromise=i,r.isLoaded=s,r.loadPromise=o;var u=e("./timer")},{"./timer":7}],4:[function(e,t,r){function n(e){for(var t in p)if(p[t]==e)return p[t];return void 0}function i(e){return"-amp-layout-"+e}function s(e){return e==p.FIXED||e==p.FIXED_HEIGHT||e==p.RESPONSIVE||e==p.FILL}function o(e){var t="string"==typeof e?e:e.tagName;return t&&0==t.toLowerCase().indexOf("i-")}function a(e){return"number"==typeof e?e+"px":e&&/^\d+(\.\d+)?(px|em|rem|vh|vw|vmin|vmax)?$/.test(e)?/^\d+(\.\d+)?$/.test(e)?e+"px":e:void 0}function u(e){return(0,v.assert)(/^\d+(\.\d+)?(px|em|rem|vh|vw|vmin|vmax)$/.test(e),"Invalid length value: %s",e),e}function l(e){u(e);var t=(0,v.assert)(e.match(/[a-z]+/i),"Failed to read units from %s",e);return t[0]}function c(e){return parseFloat(e)}function h(e){return e=e.toUpperCase(),void 0!==m[e]}function d(e){if(e=e.toUpperCase(),!m[e]){var t=e.replace(/^AMP\-/,""),r=document.createElement(t);r.controls=!0,r.style.position="absolute",r.style.visibility="hidden",document.body.appendChild(r),m[e]={width:r.offsetWidth||1,height:r.offsetHeight||1},document.body.removeChild(r)}return m[e]}function f(e){return g[e.toUpperCase()]||!1}Object.defineProperty(r,"__esModule",{value:!0}),r.parseLayout=n,r.getLayoutClass=i,r.isLayoutSizeDefined=s,r.isInternalElement=o,r.parseLength=a,r.assertLength=u,r.getLengthUnits=l,r.getLengthNumeral=c,r.hasNaturalDimensions=h,r.getNaturalDimensions=d,r.isLoadingAllowed=f;var v=e("./asserts"),p={NODISPLAY:"nodisplay",FIXED:"fixed",FIXED_HEIGHT:"fixed-height",RESPONSIVE:"responsive",CONTAINER:"container",FILL:"fill"};r.Layout=p;var m={"AMP-PIXEL":{width:1,height:1},"AMP-AUDIO":null};r.naturalDimensions_=m;var g={"AMP-ANIM":!0,"AMP-IFRAME":!0,"AMP-IMG":!0,"AMP-INSTAGRAM":!0,"AMP-PINTEREST":!0,"AMP-VIDEO":!0};r.LOADING_ELEMENTS_=g},{"./asserts":2}],5:[function(e,t,r){function n(e){var t=e.match(/\s*([^\s]*)(\s+(-?(\d+(\.(\d+)?)?|\.\d+)[a-zA-Z]))?(\s*,)?/g);(0,i.assert)(t.length>0,"srcset has to have at least one source");var r=[];return t.forEach(function(e){e=e.trim(),","==e.substr(-1)&&(e=e.substr(0,e.length-1).trim());var t=e.split(/\s+/,2);if(0!=t.length&&(1!=t.length||t[0])&&(2!=t.length||t[0]||t[1])){var n=t[0].trim();if(1==t.length||2==t.length&&!t[1])r.push({url:n,dpr:1});else{var i=t[1].trim().toLowerCase(),s=i.substring(i.length-1);"w"==s?r.push({url:n,width:parseFloat(i)}):"x"==s&&r.push({url:n,dpr:parseFloat(i)})}}}),new s(r)}Object.defineProperty(r,"__esModule",{value:!0}),r.parseSrcset=n;var i=e("./asserts"),s=function(){function e(t){babelHelpers.classCallCheck(this,e),(0,i.assert)(t.length>0,"Srcset must have at least one source"),this.sources_=t;var r=!1,n=!1;this.sources_.forEach(function(e){(0,i.assert)((e.width||e.dpr)&&(!e.width||!e.dpr),"Either dpr or width must be specified"),r=r||!!e.width,n=n||!!e.dpr}),(0,i.assert)(!r||!n,"Srcset cannot have both width and dpr sources"),r?this.sources_.sort(function(e,t){return(0,i.assert)(e.width!=t.width,"Duplicate width: %s",e.width),t.width-e.width}):this.sources_.sort(function(e,t){return(0,i.assert)(e.dpr!=t.dpr,"Duplicate dpr: %s",e.dpr),t.dpr-e.dpr}),this.widthBased_=r,this.dprBased_=n}return babelHelpers.createClass(e,[{key:"select",value:function(e,t){(0,i.assert)(e,"width=%s",e),(0,i.assert)(t,"dpr=%s",t);var r=-1;return this.widthBased_?r=this.selectByWidth_(e,t):this.dprBased_&&(r=this.selectByDpr_(e,t)),-1!=r?this.sources_[r]:this.getLast()}},{key:"selectByWidth_",value:function(e,t){for(var r=-1,n=1e6,i=1e6,s=0;s<this.sources_.length;s++){var o=this.sources_[s],a=void 0;a=o.width?o.width/t:n/2,n=Math.min(n,a);var u=Math.abs((a-e)/e-.2);i>u&&(i=u,r=s)}return r}},{key:"selectByDpr_",value:function(e,t){for(var r=-1,n=1e6,i=0;i<this.sources_.length;i++){var s=this.sources_[i],o=s.dpr||1,a=Math.abs(o-t);n>a&&(n=a,r=i)}return r}},{key:"getLast",value:function(){return this.sources_[this.sources_.length-1]}}]),e}();r.Srcset=s},{"./asserts":2}],6:[function(e,t,r){function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}function i(e,t){for(var r=0;r<p.length;r++){var n=p[r]+t;if(void 0!==e[n])return n}return""}function s(e,t,r){var s=v[t];if(!s||r){if(s=t,void 0===e[t]){var o=n(t),a=i(e,o);void 0!==e[a]&&(s=a)}r||(v[t]=s)}return s}function o(e,t,r,n,i){var o=s(e.style,t,i);o&&(e.style[o]=n?r+n:r)}function a(e,t,r){var n=s(e.style,t,r);return n?e.style[n]:void 0}function u(e,t){for(var r in t)o(e,r,t[r])}function l(e,t){void 0===t&&(t=!("none"!=e.style.display)),e.style.display=t?"":"none"}function c(e){return e+"px"}function h(e){return"string"==typeof e?"translateX("+e+")":"translateX("+c(e)+")"}function d(e,t){return"number"==typeof e&&(e=c(e)),void 0===t?"translate("+e+")":("number"==typeof t&&(t=c(t)),"translate("+e+","+t+")")}function f(e){return"scale("+e+")"}Object.defineProperty(r,"__esModule",{value:!0}),r.camelCaseToTitleCase=n,r.getVendorJsPropertyName=s,r.setStyle=o,r.getStyle=a,r.setStyles=u,r.toggle=l,r.px=c,r.translateX=h,r.translate=d,r.scale=f;var v=Object.create(null),p=["Webkit","webkit","Moz","moz","ms","O","o"]},{}],7:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(t){babelHelpers.classCallCheck(this,e),this.win=t,this.resolved_=Promise.resolve(),this.taskCount_=0,this.canceled_={},this.startTime_=this.now()}return babelHelpers.createClass(e,[{key:"now",value:function(){return Number(new Date)}},{key:"timeSinceStart",value:function(){return this.now()-this.startTime_}},{key:"delay",value:function(e,t){var r=this;if(!t){var n=function(){var t="p"+r.taskCount_++;return r.resolved_.then(function(){return r.canceled_[t]?void delete r.canceled_[t]:void e()}),{v:t}}();if("object"==typeof n)return n.v}return this.win.setTimeout(e,t)}},{key:"cancel",value:function(e){return"string"==typeof e?void(this.canceled_[e]=!0):void this.win.clearTimeout(e)}},{key:"promise",value:function(e,t){var r=this,n=null;return new Promise(function(i,s){n=r.delay(function(){n=-1,i(t)},e),-1==n&&s(new Error("Failed to schedule timer."))})["catch"](function(e){return-1!=n&&r.cancel(n),Promise.reject(e)})}},{key:"timeoutPromise",value:function(e,t){var r=this,n=null,i=new Promise(function(t,i){n=r.delay(function(){n=-1,i("timeout")},e),-1==n&&i(new Error("Failed to schedule timer."))})["catch"](function(e){return-1!=n&&r.cancel(n),Promise.reject(e)});return t?new Promise(function(e,r){i.then(e,r),t.then(e,r)}):i}}]),e}();r.Timer=n;var i=new n(window);r.timer=i},{}]},{},[1])});
//# sourceMappingURL=amp-anim-0.1.js.map